<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üé∞ CASINO HUB - Mince a v√Ωhry! üé∞</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Bangers&display=swap');

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Bangers', cursive;
    background: linear-gradient(135deg, #0a0015 0%, #1a0033 50%, #0a0015 100%);
    overflow: hidden;
    position: relative;
    height: 100vh;
}

body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: 
        radial-gradient(circle at 20% 50%, rgba(255,0,255,0.4) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(0,255,255,0.4) 0%, transparent 50%);
    animation: bgPulse 4s ease-in-out infinite;
    z-index: 0;
}

@keyframes bgPulse {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
}

/* Loading screen */
#loadingScreen {
    display: flex;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #0a0015 0%, #1a0033 50%, #0a0015 100%);
    z-index: 10000;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}

#loadingScreen::before {
    content: "";
    position: fixed;
    inset: 0;
    background: 
        radial-gradient(circle at 20% 50%, rgba(255,0,255,0.4) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(0,255,255,0.4) 0%, transparent 50%);
    animation: bgPulse 4s ease-in-out infinite;
    z-index: -1;
}

.loading-content {
    text-align: center;
}

.loading-content h2 {
    font-size: 60px;
    margin-bottom: 30px;
    color: #ff00ff;
    text-shadow: 0 0 30px #ff00ff, 0 0 60px #00ffff;
    animation: casinoGlow 2s ease-in-out infinite;
    font-family: 'Bangers', cursive;
}

@keyframes casinoGlow {
    0%, 100% { 
        text-shadow: 0 0 30px #ff00ff, 0 0 60px #00ffff;
        transform: scale(1);
    }
    50% { 
        text-shadow: 0 0 50px #00ffff, 0 0 100px #ff00ff;
        transform: scale(1.05);
    }
}

.loading-bar-container {
    width: 500px;
    height: 30px;
    background: rgba(0, 0, 0, 0.7);
    border: 4px solid #ff00ff;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 0 40px rgba(255, 0, 255, 0.8);
    position: relative;
}

.loading-bar-container::before {
    content: "";
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(90deg, #ff00ff, #00ffff, #ff00ff);
    border-radius: 15px;
    z-index: -1;
    animation: borderRotate 3s linear infinite;
}

@keyframes borderRotate {
    0% { filter: hue-rotate(0deg); }
    100% { filter: hue-rotate(360deg); }
}

.loading-bar {
    height: 100%;
    background: linear-gradient(90deg, #ff00ff, #00ffff, #ffff00, #ff00ff);
    background-size: 200% 100%;
    animation: loadingGradient 2s ease-in-out infinite;
    border-radius: 11px;
    box-shadow: 0 0 30px rgba(255, 0, 255, 0.9);
    transition: width 0.1s linear;
}

@keyframes loadingGradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.loading-text {
    margin-top: 25px;
    font-size: 24px;
    color: #00ffff;
    text-shadow: 0 0 15px #00ffff, 0 0 30px #ff00ff;
    font-family: 'Bangers', cursive;
}

.loading-spinner {
    margin-top: 30px;
    display: flex;
    gap: 15px;
    justify-content: center;
}

.spinner-dot {
    width: 20px;
    height: 20px;
    background: linear-gradient(135deg, #ff00ff, #00ffff);
    border-radius: 50%;
    animation: casinoSpinnerBounce 1.4s ease-in-out infinite;
    box-shadow: 0 0 20px #ff00ff;
}

.spinner-dot:nth-child(1) { 
    animation-delay: -0.32s;
    background: #ff00ff;
}
.spinner-dot:nth-child(2) { 
    animation-delay: -0.16s;
    background: #00ffff;
}
.spinner-dot:nth-child(3) { 
    background: #ffff00;
}

@keyframes casinoSpinnerBounce {
    0%, 80%, 100% { 
        transform: scale(0) rotate(0deg); 
        opacity: 0.5; 
    }
    40% { 
        transform: scale(1.2) rotate(180deg); 
        opacity: 1; 
    }
}

.loading-coins {
    margin-top: 20px;
    font-size: 40px;
    animation: coinSpin 1s linear infinite;
}

@keyframes coinSpin {
    0% { transform: rotateY(0deg); }
    100% { transform: rotateY(360deg); }
}

.star {
    position: fixed;
    width: 2px;
    height: 2px;
    background: white;
    border-radius: 50%;
    animation: twinkle 3s infinite;
    z-index: 1;
}

@keyframes twinkle {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
}

#wrapper {
    position: relative;
    width: 100%;
    height: 100vh;
    display: flex;
    flex-direction: column;
    z-index: 20;
    padding-top: 60px;
}

#topBar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(135deg, rgba(10,0,21,0.98) 0%, rgba(26,0,51,0.98) 100%);
    border-bottom: 3px solid #ff00ff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 15px;
    z-index: 100;
    box-shadow: 0 5px 30px rgba(255,0,255,0.6);
}

#userInfo {
    display: flex;
    align-items: center;
    gap: 15px;
}

#userName {
    color: #00ffff;
    font-size: 22px;
    text-shadow: 0 0 15px #00ffff, 0 0 30px #ff00ff;
}

#coinDisplay {
    display: flex;
    align-items: center;
    gap: 8px;
    background: linear-gradient(135deg, #ffd700 0%, #ffaa00 100%);
    padding: 6px 15px;
    border-radius: 20px;
    border: 2px solid #ffff00;
    box-shadow: 0 0 25px rgba(255,215,0,0.9);
}

#coinAmount {
    color: #000;
    font-size: 22px;
    font-weight: bold;
}

#topButtons {
    display: flex;
    gap: 10px;
}

#dailyBonus, #shopBtn {
    padding: 8px 20px;
    border: 3px solid;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    border-radius: 10px;
    transition: all 0.3s ease;
    font-family: 'Bangers', cursive;
}

#dailyBonus {
    background: linear-gradient(135deg, #00ff00 0%, #00aa00 100%);
    border-color: #00ff00;
    color: #000;
}

#shopBtn {
    background: linear-gradient(135deg, #ff00ff 0%, #aa00ff 100%);
    border-color: #ff00ff;
    color: #fff;
}

#dailyBonus:hover, #shopBtn:hover {
    transform: scale(1.05);
}

#dailyBonus:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

#gameSelector {
    display: flex;
    gap: 10px;
    padding: 10px 15px;
    justify-content: center;
    background: rgba(0,0,0,0.4);
    flex-shrink: 0;
}

.game-btn {
    padding: 12px 30px;
    border-radius: 15px;
    font-weight: bold;
    font-size: 20px;
    cursor: pointer;
    font-family: 'Bangers', cursive;
    border: 3px solid;
    transition: all 0.3s ease;
}

.game-btn.active {
    transform: scale(1.1);
    box-shadow: 0 0 30px currentColor;
}

#slotBtn {
    background: linear-gradient(135deg, #ff0080 0%, #ff00ff 100%);
    border-color: #ff00ff;
    color: #fff;
}

#wheelBtn {
    background: linear-gradient(135deg, #ffff00 0%, #ff8800 100%);
    border-color: #ffff00;
    color: #000;
}

#leaderboardBtn {
    background: linear-gradient(135deg, #00ffff 0%, #0080ff 100%);
    border-color: #00ffff;
    color: #000;
}

.game-container {
    display: none;
    flex: 1;
    overflow-y: auto;
    padding: 15px;
}

.game-container.active {
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* SLOT MACHINE */
#slotContainer {
    display: flex;
    gap: 20px;
    align-items: flex-start;
    justify-content: center;
    flex-wrap: wrap;
    width: 100%;
}

#slotMachine {
    background: linear-gradient(135deg, #2a1a4a 0%, #1a0a3a 50%, #2a1a4a 100%);
    border: 6px solid #ff00ff;
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 0 50px rgba(255,0,255,0.9);
    flex: 1;
    min-width: 380px;
    max-width: 480px;
}

#slotTitle {
    color: #00ffff;
    font-size: 32px;
    text-align: center;
    margin-bottom: 15px;
    text-shadow: 0 0 20px #00ffff, 0 0 40px #ff00ff;
}

#reels {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin: 15px 0;
    background: #000;
    padding: 15px;
    border-radius: 15px;
    box-shadow: inset 0 0 30px rgba(255,0,255,0.5);
}

.reel {
    width: 100px;
    height: 300px;
    background: linear-gradient(135deg, #1a1a2a 0%, #0a0a1a 100%);
    border: 4px solid #00ffff;
    border-radius: 10px;
    overflow: hidden;
    position: relative;
    box-shadow: 0 0 20px rgba(0,255,255,0.5);
}

.reel.spinning {
    filter: blur(2px);
    opacity: 0.9;
}

.reel.stopping {
    animation: reelStop 0.3s ease-out;
}

@keyframes reelStop {
    0% { 
        filter: blur(2px); 
        transform: scale(1);
        opacity: 0.9;
    }
    50% { 
        filter: blur(0); 
        transform: scale(1.05);
        opacity: 1;
    }
    100% { 
        filter: blur(0); 
        transform: scale(1);
        opacity: 1;
    }
}

.reel-inner {
    position: absolute;
    width: 100%;
    transition: transform 0.1s linear;
}

.symbol {
    width: 100%;
    height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 60px;
    background: linear-gradient(135deg, #2a2a3a 0%, #1a1a2a 100%);
    border-bottom: 2px solid #444;
}

.reel-window {
    position: absolute;
    top: 100px;
    left: 0;
    right: 0;
    height: 100px;
    border: 3px solid #ff00ff;
    border-radius: 8px;
    pointer-events: none;
    box-shadow: 0 0 15px rgba(255,0,255,0.7);
}

#slotControls {
    text-align: center;
    margin-top: 15px;
}

#betAmount {
    color: #00ffff;
    font-size: 24px;
    margin-bottom: 10px;
    text-shadow: 0 0 10px #00ffff;
}

.bet-btn {
    padding: 8px 18px;
    margin: 0 3px;
    background: linear-gradient(135deg, #00ff00 0%, #00aa00 100%);
    border: 2px solid #00ff00;
    border-radius: 12px;
    color: #000;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    font-family: 'Bangers', cursive;
    transition: all 0.3s ease;
}

.bet-btn:hover {
    transform: scale(1.05);
}

.bet-btn.active {
    background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
    border-color: #FFD700;
    box-shadow: 0 0 20px rgba(255,215,0,0.8);
}

#spinSlotBtn {
    margin-top: 15px;
    padding: 15px 60px;
    border-radius: 20px;
    font-weight: bold;
    font-size: 28px;
    cursor: pointer;
    font-family: 'Bangers', cursive;
    background: linear-gradient(135deg, #ff0080 0%, #ff00ff 100%);
    color: #fff;
    border: 4px solid #ff00ff;
    transition: all 0.3s ease;
    box-shadow: 0 0 30px rgba(255,0,255,0.6);
}

#spinSlotBtn:hover {
    transform: scale(1.05);
    box-shadow: 0 0 40px rgba(255,0,255,0.9);
}

#spinSlotBtn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

#slotResult {
    margin-top: 15px;
    font-size: 24px;
    color: #00ffff;
    text-align: center;
    min-height: 35px;
    font-weight: bold;
    text-shadow: 0 0 15px #00ffff;
}

.paytable {
    background: linear-gradient(135deg, rgba(26,0,51,0.8) 0%, rgba(10,0,21,0.8) 100%);
    padding: 20px;
    border-radius: 20px;
    border: 3px solid #00ffff;
    flex: 0 0 220px;
    display: flex;
    flex-direction: column;
    box-shadow: 0 0 30px rgba(0,255,255,0.5);
}

.paytable h3 {
    color: #00ffff;
    text-align: center;
    font-size: 24px;
    margin-bottom: 15px;
    text-shadow: 0 0 15px #00ffff;
}

.paytable-grid {
    display: flex;
    flex-direction: column;
    gap: 8px;
    color: #fff;
    font-size: 18px;
}

.paytable-item {
    padding: 8px 12px;
    background: rgba(0,255,255,0.15);
    border-radius: 10px;
    text-align: center;
    border: 1px solid rgba(0,255,255,0.3);
    transition: all 0.3s ease;
}

.paytable-item:hover {
    background: rgba(0,255,255,0.25);
    transform: translateX(3px);
}

.paytable-item.jackpot {
    background: rgba(255,0,255,0.3);
    border: 2px solid #ff00ff;
    color: #ff00ff;
    font-weight: bold;
    animation: jackpotGlow 2s ease-in-out infinite;
}

@keyframes jackpotGlow {
    0%, 100% { box-shadow: 0 0 10px rgba(255,0,255,0.5); }
    50% { box-shadow: 0 0 25px rgba(255,0,255,0.9); }
}

/* WHEEL */
#wheelContainer {
    position: relative;
    margin: 20px 0;
}

.pointer {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -200px);
    width: 0;
    height: 0;
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-top: 40px solid #ffff00;
    z-index: 50;
    filter: drop-shadow(0 0 10px #ffff00);
}

canvas {
    width: 400px;
    height: 400px;
    border-radius: 50%;
    border: 4px solid #ffff00;
    box-shadow: 0 0 50px #ff00ff;
}

.wheelCenter {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #ff00ff 0%, #00ffff 100%);
    border-radius: 50%;
    border: 3px solid #ffff00;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    z-index: 60;
    box-shadow: 0 0 20px rgba(255,255,0,0.8);
}

#wheelTitle {
    color: #ffff00;
    font-size: 28px;
    margin: 15px 0;
    text-align: center;
    text-shadow: 0 0 15px #ffff00, 0 0 30px #ff00ff;
}

#spinWheelBtn {
    margin-top: 20px;
    padding: 15px 50px;
    border-radius: 20px;
    font-weight: bold;
    font-size: 26px;
    cursor: pointer;
    font-family: 'Bangers', cursive;
    background: linear-gradient(135deg, #ffff00 0%, #ff8800 100%);
    color: #000;
    border: 3px solid #ffff00;
    transition: all 0.3s ease;
    box-shadow: 0 0 30px rgba(255,255,0,0.6);
}

#spinWheelBtn:hover {
    transform: scale(1.05);
    box-shadow: 0 0 40px rgba(255,255,0,0.9);
}

#spinWheelBtn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

#wheelCost {
    color: #ffaa00;
    font-size: 20px;
    margin-top: 8px;
    text-align: center;
    text-shadow: 0 0 10px #ffaa00;
}

/* LEADERBOARD */
#leaderboardFull {
    width: 100%;
    max-width: 700px;
    background: linear-gradient(135deg, rgba(26,0,51,0.95) 0%, rgba(10,0,21,0.95) 100%);
    border: 4px solid #ff00ff;
    border-radius: 20px;
    padding: 20px;
    max-height: calc(100vh - 200px);
    overflow-y: auto;
    box-shadow: 0 0 50px rgba(255,0,255,0.7);
}

#leaderboardFull h2 {
    color: #00ffff;
    font-size: 36px;
    text-align: center;
    margin-bottom: 20px;
    text-shadow: 0 0 20px #00ffff, 0 0 40px #ff00ff;
}

.leaderboard-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 15px;
    margin: 8px 0;
    background: rgba(255,0,255,0.1);
    border-radius: 12px;
    border: 2px solid rgba(255,0,255,0.3);
    transition: all 0.3s ease;
}

.leaderboard-item:hover {
    background: rgba(255,0,255,0.3);
    transform: translateX(-3px);
    box-shadow: 0 0 20px rgba(255,0,255,0.5);
}

.leaderboard-item.top3 {
    background: linear-gradient(135deg, rgba(255,215,0,0.3) 0%, rgba(255,140,0,0.3) 100%);
    border-color: #FFD700;
}

.leaderboard-rank {
    color: #ffff00;
    font-size: 24px;
    font-weight: bold;
    min-width: 50px;
}

.leaderboard-name {
    color: #fff;
    font-size: 20px;
    flex: 1;
    margin: 0 15px;
}

.leaderboard-coins {
    color: #ffaa00;
    font-size: 22px;
    font-weight: bold;
}

/* SHOP */
#shopGrid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    max-width: 900px;
    width: 100%;
}

.shop-item {
    background: linear-gradient(135deg, rgba(26,0,51,0.9) 0%, rgba(10,0,21,0.9) 100%);
    border: 3px solid #ff00ff;
    border-radius: 20px;
    padding: 20px;
    text-align: center;
    transition: all 0.3s ease;
    box-shadow: 0 0 30px rgba(255,0,255,0.5);
}

.shop-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 0 50px rgba(255,0,255,0.8);
}

.shop-item.owned {
    border-color: #00ff00;
    box-shadow: 0 0 30px rgba(0,255,0,0.5);
}

.shop-icon {
    font-size: 80px;
    margin-bottom: 15px;
    filter: drop-shadow(0 0 20px currentColor);
}

.shop-name {
    color: #00ffff;
    font-size: 24px;
    margin-bottom: 10px;
    text-shadow: 0 0 10px #00ffff;
}

.shop-price {
    color: #ffd700;
    font-size: 28px;
    margin-bottom: 15px;
    font-weight: bold;
}

.shop-buy-btn {
    padding: 10px 25px;
    background: linear-gradient(135deg, #00ff00 0%, #00aa00 100%);
    border: 3px solid #00ff00;
    border-radius: 12px;
    color: #000;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    font-family: 'Bangers', cursive;
    transition: all 0.3s ease;
}

.shop-buy-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 0 20px rgba(0,255,0,0.8);
}

.shop-buy-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background: #666;
    border-color: #666;
}

/* MODALS */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.9);
    align-items: center;
    justify-content: center;
    z-index: 200;
}

.modal-content {
    background: linear-gradient(135deg, #330066 0%, #1a0033 100%);
    padding: 30px;
    border-radius: 20px;
    border: 4px solid #00ffff;
    box-shadow: 0 0 100px #ff00ff;
    max-width: 90%;
    animation: modalAppear 0.3s ease-out;
}

@keyframes modalAppear {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.modal h2 {
    color: #00ffff;
    font-size: 40px;
    text-align: center;
    margin-bottom: 20px;
    text-shadow: 0 0 20px #00ffff, 0 0 40px #ff00ff;
}

.modal-close {
    margin-top: 15px;
    padding: 12px 35px;
    font-size: 20px;
    border-radius: 15px;
    border: 3px solid #00ffff;
    background: linear-gradient(135deg, #00ffff 0%, #0080ff 100%);
    color: #000;
    font-weight: bold;
    cursor: pointer;
    font-family: 'Bangers', cursive;
    transition: all 0.3s ease;
    display: block;
    margin-left: auto;
    margin-right: auto;
}

.modal-close:hover {
    transform: scale(1.05);
    box-shadow: 0 0 30px rgba(0,255,255,0.8);
}

#loginModal input {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    border-radius: 12px;
    border: 2px solid #ff00ff;
    background: rgba(26,0,51,0.8);
    color: #fff;
    font-size: 18px;
    font-family: 'Bangers', cursive;
}

#loginModal input:focus {
    outline: none;
    border-color: #00ffff;
    box-shadow: 0 0 20px rgba(0,255,255,0.5);
}

#loginModal button {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    border-radius: 12px;
    border: 3px solid #00ff00;
    background: linear-gradient(135deg, #00ff00 0%, #00aa00 100%);
    color: #000;
    font-weight: bold;
    cursor: pointer;
    font-family: 'Bangers', cursive;
    font-size: 20px;
    transition: all 0.3s ease;
}

#loginModal button:hover {
    transform: scale(1.05);
    box-shadow: 0 0 30px rgba(0,255,0,0.8);
}

#winAmount {
    color: #ffaa00;
    font-size: 60px;
    margin: 15px 0;
    text-shadow: 0 0 30px #ffaa00, 0 0 60px #ff00ff;
}

.confetti {
    position: fixed;
    width: 10px;
    height: 10px;
    z-index: 250;
    pointer-events: none;
    border-radius: 50%;
}

@media (max-width: 768px) {
    .loading-bar-container {
        width: 90%;
        max-width: 400px;
    }
    
    .loading-content h2 {
        font-size: 40px;
    }
    
    #slotContainer {
        flex-direction: column;
        align-items: center;
    }
    
    #slotMachine {
        min-width: 320px;
    }
    
    .paytable {
        flex: 1;
        width: 100%;
        max-width: 320px;
    }
    
    .reel {
        width: 80px;
        height: 240px;
    }
    
    .symbol {
        height: 80px;
        font-size: 50px;
    }
    
    .reel-window {
        top: 80px;
        height: 80px;
    }
    
    canvas {
        width: 300px;
        height: 300px;
    }
    
    #shopGrid {
        grid-template-columns: 1fr;
    }
}

::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(0,0,0,0.3);
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #ff00ff 0%, #00ffff 100%);
    border-radius: 4px;
}
</style>
</head>
<body>

<!-- Loading Screen -->
<div id="loadingScreen">
    <div class="loading-content">
        <h2>üé∞ CASINO NAƒå√çT√ÅN√ç üé∞</h2>
        <div class="loading-bar-container">
            <div class="loading-bar" id="loadingBar"></div>
        </div>
        <div class="loading-text" id="loadingText">P≈ôipravuji hern√≠ automaty...</div>
        <div class="loading-spinner">
            <div class="spinner-dot"></div>
            <div class="spinner-dot"></div>
            <div class="spinner-dot"></div>
        </div>
        <div class="loading-coins">ü™ô</div>
    </div>
</div>

<div id="topBar">
    <div id="userInfo">
        <span id="userName">Hr√°ƒç</span>
        <div id="coinDisplay">
            <span>ü™ô</span>
            <span id="coinAmount">0</span>
        </div>
    </div>
    <div id="topButtons">
        <button id="dailyBonus" onclick="claimDailyBonus()">üéÅ DENN√ç BONUS</button>
        <button id="shopBtn" onclick="switchGame('shop')">üõçÔ∏è OBCHOD</button>
    </div>
</div>

<div id="wrapper">
    <div id="gameSelector">
        <button id="slotBtn" class="game-btn active" onclick="switchGame('slot')">
            üé∞ AUTOMAT
        </button>
        <button id="wheelBtn" class="game-btn" onclick="switchGame('wheel')">
            üé° KOLO ≈†TƒöST√ç
        </button>
        <button id="leaderboardBtn" class="game-btn" onclick="switchGame('leaderboard')">
            üèÜ ≈ΩEB≈ò√çƒåEK
        </button>
    </div>

    <!-- SLOT MACHINE GAME -->
    <div id="slotGame" class="game-container active">
        <div id="slotContainer">
            <div id="slotMachine">
                <h2 id="slotTitle">üçí AUTOMAT üçí</h2>
                
                <div id="reels">
                    <div class="reel">
                        <div class="reel-inner" id="reel1"></div>
                        <div class="reel-window"></div>
                    </div>
                    <div class="reel">
                        <div class="reel-inner" id="reel2"></div>
                        <div class="reel-window"></div>
                    </div>
                    <div class="reel">
                        <div class="reel-inner" id="reel3"></div>
                        <div class="reel-window"></div>
                    </div>
                </div>
                
                <div id="slotControls">
                    <div id="betAmount">S√°zka: <span id="currentBet">10</span> ü™ô</div>
                    <div>
                        <button class="bet-btn active" onclick="setBet(10)">10</button>
                        <button class="bet-btn" onclick="setBet(25)">25</button>
                        <button class="bet-btn" onclick="setBet(50)">50</button>
                        <button class="bet-btn" onclick="setBet(100)">100</button>
                    </div>
                    <button id="spinSlotBtn" onclick="spinSlot()">üé∞ ZATOƒåIT!</button>
                    <div id="slotResult"></div>
                </div>
            </div>
            
            <div class="paytable">
                <h3>üí∞ V√ùHRY üí∞</h3>
                <div class="paytable-grid">
                    <div class="paytable-item">üçíüçíüçí ‚Üí 5x</div>
                    <div class="paytable-item">üçãüçãüçã ‚Üí 4x</div>
                    <div class="paytable-item">üçäüçäüçä ‚Üí 6x</div>
                    <div class="paytable-item">üçáüçáüçá ‚Üí 8x</div>
                    <div class="paytable-item">üîîüîîüîî ‚Üí 10x</div>
                    <div class="paytable-item">‚≠ê‚≠ê‚≠ê ‚Üí 15x</div>
                    <div class="paytable-item">üíéüíéüíé ‚Üí 20x</div>
                    <div class="paytable-item jackpot">üé∞üé∞üé∞ ‚Üí 50x</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- WHEEL OF FORTUNE GAME -->
    <div id="wheelGame" class="game-container">
        <div id="wheelContainer">
            <div class="pointer"></div>
            <canvas id="wheel" width="400" height="400"></canvas>
            <div class="wheelCenter">üé°</div>
        </div>
        
        <h2 id="wheelTitle">ZATOƒåTE A Z√çSKEJTE MINCE!</h2>
        <div id="wheelCost">Cena: 10 ü™ô</div>
        
        <button id="spinWheelBtn" onclick="spinWheel()">üéØ ZATOƒåIT!</button>
    </div>
    
    <!-- LEADERBOARD -->
    <div id="leaderboardGame" class="game-container">
        <div id="leaderboardFull">
            <h2>üèÜ ONLINE ≈ΩEB≈ò√çƒåEK üèÜ</h2>
            <div id="leaderboardList"></div>
        </div>
    </div>
    
    <!-- SHOP -->
    <div id="shopGame" class="game-container">
        <div id="leaderboardFull">
            <h2>üõçÔ∏è OBCHOD SE VZHLEDEM üõçÔ∏è</h2>
            <div id="shopGrid"></div>
        </div>
    </div>
</div>

<!-- MODALS -->
<div id="loginModal" class="modal" style="display: none;">
    <div class="modal-content">
        <h2>üéÆ V√çTEJTE V CASINU üéÆ</h2>
        <p style="color: #fff; text-align: center; font-size: 18px; margin-bottom: 15px;">
            Zadejte sv√© hern√≠ jm√©no a zaƒçnƒõte hr√°t!
        </p>
        <input type="text" id="nicknameInput" placeholder="Va≈°e p≈ôezd√≠vka..." maxlength="15">
        <button id="loginBtn" onclick="login()">ZAƒå√çT HR√ÅT!</button>
    </div>
</div>

<div id="winModal" class="modal">
    <div class="modal-content">
        <h2>üéâ V√ùHRA! üéâ</h2>
        <div id="winAmount">+100 ü™ô</div>
        <button class="modal-close" onclick="closeWinModal()">SUPER!</button>
    </div>
</div>

<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm';

// Supabase konfigurace
const SUPABASE_URL = 'https://bmmaijlbpwgzhrxzxphf.supabase.co'
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJtbWFpamxicHdnemhyeHp4cGhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY4NjQ5MDcsImV4cCI6MjA4MjQ0MDkwN30.s0YQVnAjMXFu1pSI1NXZ2naSab179N0vQPglsmy3Pgw'
const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// Loading screen logika
function startLoading() {
    const loadingTime = 3000 + Math.random() * 3000; // 3-6 sekund
    const loadingBar = document.getElementById('loadingBar');
    const loadingText = document.getElementById('loadingText');
    
    const loadingMessages = [
        'P≈ôipravuji hern√≠ automaty...',
        'Generuji v√Ωhern√≠ symboly...',
        'Naƒç√≠t√°m kolo ≈°tƒõst√≠...',
        'Kontroluji ≈æetony...',
        'Inicializuji jackpot...',
        'P≈ôipravuji casino stoly...',
        'T√©mƒõ≈ô hotovo...'
    ];
    
    let progress = 0;
    const interval = 50;
    const steps = loadingTime / interval;
    const progressStep = 100 / steps;
    
    const loadingInterval = setInterval(() => {
        progress += progressStep;
        if (progress >= 100) {
            progress = 100;
            clearInterval(loadingInterval);
        }
        
        loadingBar.style.width = progress + '%';
        
        if (Math.random() < 0.1) {
            loadingText.textContent = loadingMessages[Math.floor(Math.random() * loadingMessages.length)];
        }
    }, interval);
    
    setTimeout(() => {
        document.getElementById('loadingScreen').style.display = 'none';
        loadingBar.style.width = '0%';
        loadingText.textContent = 'P≈ôipravuji hern√≠ automaty...';
    }, loadingTime);
}

// Vytvo≈ôen√≠ hvƒõzd
for(let i = 0; i < 30; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.style.left = Math.random() * 100 + '%';
    star.style.top = Math.random() * 100 + '%';
    star.style.animationDelay = Math.random() * 3 + 's';
    document.body.appendChild(star);
}

// Glob√°ln√≠ promƒõnn√©
let currentUser = {
    id: null,
    nickname: '',
    coins: 0,
    lastDailyBonus: null,
    ownedThemes: ['default'],
    activeTheme: 'default'
};

let currentGame = 'slot';
let currentBet = 10;

// SHOP ITEMS
const shopItems = [
    { id: 'neon', name: 'üí† Neon', price: 500, icon: 'üí†', colors: { primary: '#00ffff', secondary: '#ff00ff' } },
    { id: 'gold', name: 'üåü Zlat√Ω', price: 1000, icon: 'üåü', colors: { primary: '#ffd700', secondary: '#ffaa00' } },
    { id: 'fire', name: 'üî• Ohniv√Ω', price: 1500, icon: 'üî•', colors: { primary: '#ff4500', secondary: '#ff8c00' } },
    { id: 'ocean', name: 'üåä Oce√°n', price: 2000, icon: 'üåä', colors: { primary: '#0080ff', secondary: '#00ffff' } },
    { id: 'rainbow', name: 'üåà Duha', price: 3000, icon: 'üåà', colors: { primary: '#ff00ff', secondary: '#00ff00' } },
    { id: 'emerald', name: 'üíö Smaragd', price: 3500, icon: 'üíö', colors: { primary: '#00ff88', secondary: '#00cc66' } },
    { id: 'royal', name: 'üëë Kr√°lovsk√Ω', price: 4000, icon: 'üëë', colors: { primary: '#9400d3', secondary: '#ffd700' } },
    { id: 'toxic', name: '‚ò¢Ô∏è Toxick√Ω', price: 4500, icon: '‚ò¢Ô∏è', colors: { primary: '#39ff14', secondary: '#ccff00' } },
    { id: 'sunset', name: 'üåÖ Z√°pad slunce', price: 5000, icon: 'üåÖ', colors: { primary: '#ff6b35', secondary: '#ff8c42' } },
    { id: 'ice', name: '‚ùÑÔ∏è Ledov√Ω', price: 5500, icon: '‚ùÑÔ∏è', colors: { primary: '#00d9ff', secondary: '#a3e4f7' } },
    { id: 'vampire', name: 'üßõ Up√≠≈ô√≠', price: 6000, icon: 'üßõ', colors: { primary: '#8b0000', secondary: '#dc143c' } },
    { id: 'matrix', name: 'üíª Matrix', price: 6500, icon: 'üíª', colors: { primary: '#00ff00', secondary: '#008800' } },
    { id: 'galaxy', name: 'üåå Galaxie', price: 7000, icon: 'üåå', colors: { primary: '#4b0082', secondary: '#9370db' } },
    { id: 'cherry', name: 'üçí T≈ôe≈°e≈à', price: 7500, icon: 'üçí', colors: { primary: '#ff1493', secondary: '#ff69b4' } },
    { id: 'cyber', name: 'ü§ñ Cyber', price: 8000, icon: 'ü§ñ', colors: { primary: '#00ffff', secondary: '#ff00ff' } },
    { id: 'diamond', name: 'üíé Diamant', price: 9000, icon: 'üíé', colors: { primary: '#b9f2ff', secondary: '#ffffff' } },
    { id: 'lava', name: 'üåã L√°va', price: 10000, icon: 'üåã', colors: { primary: '#ff4500', secondary: '#ff0000' } },
    { id: 'mint', name: 'üçÉ M√°tov√Ω', price: 11000, icon: 'üçÉ', colors: { primary: '#98ff98', secondary: '#3cb371' } },
    { id: 'lightning', name: '‚ö° Blesk', price: 12000, icon: '‚ö°', colors: { primary: '#ffff00', secondary: '#ffa500' } },
    { id: 'legend', name: 'üèÜ Legend√°rn√≠', price: 15000, icon: 'üèÜ', colors: { primary: '#ffd700', secondary: '#ff1493' } }
];

// SLOT MACHINE LOGIC
const symbols = ['üçí', 'üçã', 'üçä', 'üçá', 'üîî', '‚≠ê', 'üíé', 'üé∞'];
const symbolWeights = {
    'üçí': 25,
    'üçã': 20,
    'üçä': 18,
    'üçá': 15,
    'üîî': 10,
    '‚≠ê': 7,
    'üíé': 4,
    'üé∞': 1
};

const winMultipliers = {
    'üçí': 5,
    'üçã': 4,
    'üçä': 6,
    'üçá': 8,
    'üîî': 10,
    '‚≠ê': 15,
    'üíé': 20,
    'üé∞': 50
};

let reels = [[], [], []];
let spinning = false;

function initReels() {
    for (let i = 0; i < 3; i++) {
        const reel = document.getElementById(`reel${i + 1}`);
        reel.innerHTML = '';
        reels[i] = [];
        
        // Vytvo≈ô v√≠ce symbol≈Ø pro plynul√© toƒçen√≠
        for (let j = 0; j < 100; j++) {
            const symbol = getWeightedSymbol();
            reels[i].push(symbol);
            
            const symbolDiv = document.createElement('div');
            symbolDiv.className = 'symbol';
            symbolDiv.textContent = symbol;
            reel.appendChild(symbolDiv);
        }
    }
}

function getWeightedSymbol() {
    const totalWeight = Object.values(symbolWeights).reduce((a, b) => a + b, 0);
    let random = Math.random() * totalWeight;
    
    for (const [symbol, weight] of Object.entries(symbolWeights)) {
        random -= weight;
        if (random <= 0) return symbol;
    }
    return 'üçí';
}

window.spinSlot = async function() {
    if (spinning) return;
    if (currentUser.coins < currentBet) {
        alert('Nem√°te dostatek minc√≠!');
        return;
    }
    
    spinning = true;
    document.getElementById('spinSlotBtn').disabled = true;
    document.getElementById('slotResult').textContent = '';
    
    currentUser.coins -= currentBet;
    await saveUser();
    updateUI();
    
    const results = [];
    const isJackpot = Math.random() < 0.005;
    
    if (isJackpot) {
        const jackpotSymbol = Math.random() < 0.5 ? 'üíé' : 'üé∞';
        results.push(jackpotSymbol, jackpotSymbol, jackpotSymbol);
    } else {
        for (let i = 0; i < 3; i++) {
            results.push(getWeightedSymbol());
        }
    }
    
    document.querySelectorAll('.reel').forEach(reel => {
        reel.classList.add('spinning');
    });
    
    const spinDurations = [2500, 3200, 3900];
    const symbolHeight = 100;
    
    for (let i = 0; i < 3; i++) {
        const reel = document.getElementById(`reel${i + 1}`);
        const reelElement = reel.parentElement;
        
        // Najdi c√≠lov√Ω symbol
        let targetIndex = -1;
        for (let j = 0; j < reels[i].length; j++) {
            if (reels[i][j] === results[i]) {
                targetIndex = j;
                break;
            }
        }
        
        if (targetIndex === -1) targetIndex = 10;
        
        const targetPosition = -(targetIndex * symbolHeight - symbolHeight);
        
        // Plynul√° rychl√° animace
        const spinSpeed = 15; // rychlost toƒçen√≠
        let currentPos = 0;
        const spinInterval = setInterval(() => {
            currentPos -= spinSpeed;
            reel.style.transform = `translateY(${currentPos}px)`;
            
            // Reset pozice pro nekoneƒçn√© toƒçen√≠
            if (Math.abs(currentPos) > reels[i].length * symbolHeight / 2) {
                currentPos = 0;
            }
        }, 16);
        
        // Zastav toƒçen√≠ po urƒçit√© dobƒõ
        setTimeout(() => {
            clearInterval(spinInterval);
            
            reelElement.classList.remove('spinning');
            reelElement.classList.add('stopping');
            
            // Plynul√© zastaven√≠ na c√≠lov√©m symbolu
            reel.style.transition = 'transform 800ms cubic-bezier(0.25, 0.46, 0.45, 0.94)';
            reel.style.transform = `translateY(${targetPosition}px)`;
            
            setTimeout(() => {
                reelElement.classList.remove('stopping');
            }, 800);
        }, spinDurations[i]);
    }
    
    setTimeout(() => {
        evaluateSlotWin(results);
    }, 5200);
};

async function evaluateSlotWin(results) {
    let winAmount = 0;
    let message = '';
    
    if (results[0] === results[1] && results[1] === results[2]) {
        const multiplier = winMultipliers[results[0]];
        winAmount = currentBet * multiplier;
        
        if (results[0] === 'üé∞') {
            message = `üé∞ MEGA JACKPOT! üé∞ +${winAmount} ü™ô`;
        } else if (results[0] === 'üíé') {
            message = `üíé DIAMANTOV√Å V√ùHRA! üíé +${winAmount} ü™ô`;
        } else {
            message = `üéâ V√ùHRA! üéâ +${winAmount} ü™ô`;
        }
    } else {
        message = 'üò¢ Zkuste to znovu!';
    }
    
    document.getElementById('slotResult').textContent = message;
    
    if (winAmount > 0) {
        currentUser.coins += winAmount;
        await saveUser();
        updateUI();
        
        document.getElementById('winAmount').textContent = `+${winAmount} ü™ô`;
        document.getElementById('winModal').style.display = 'flex';
        
        if (winAmount >= currentBet * 10) {
            for (let i = 0; i < 100; i++) {
                setTimeout(() => createConfetti(), i * 10);
            }
        }
    }
    
    spinning = false;
    document.getElementById('spinSlotBtn').disabled = false;
}

window.setBet = function(amount) {
    currentBet = amount;
    document.getElementById('currentBet').textContent = amount;
    
    document.querySelectorAll('.bet-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
};

// WHEEL OF FORTUNE LOGIC
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const center = 200;

const wheelPrizes = [
    { coins: 0, color: '#666666', weight: 50 },
    { coins: 5, color: '#ff0080', weight: 20 },
    { coins: 15, color: '#00ff80', weight: 15 },
    { coins: 25, color: '#0080ff', weight: 10 },
    { coins: 50, color: '#ff8000', weight: 4 },
    { coins: 100, color: '#ffff00', weight: 1 }
];

let rotation = 0;
let wheelSpinning = false;
let autoRotating = true;

function drawWheel() {
    ctx.clearRect(0, 0, 400, 400);
    const slice = 2 * Math.PI / wheelPrizes.length;
    
    wheelPrizes.forEach((prize, i) => {
        ctx.beginPath();
        ctx.moveTo(center, center);
        ctx.arc(center, center, center - 5, rotation + i * slice, rotation + (i + 1) * slice);
        ctx.fillStyle = prize.color;
        ctx.fill();
        
        ctx.strokeStyle = 'rgba(0,0,0,0.3)';
        ctx.lineWidth = 2;
        ctx.stroke();
        
        ctx.save();
        ctx.translate(center, center);
        ctx.rotate(rotation + i * slice + slice / 2);
        ctx.fillStyle = "white";
        ctx.strokeStyle = "black";
        ctx.lineWidth = 2;
        ctx.textAlign = "right";
        ctx.font = "bold 18px Bangers";
        const text = prize.coins === 0 ? '0 ü™ô' : `${prize.coins} ü™ô`;
        ctx.strokeText(text, center - 25, 6);
        ctx.fillText(text, center - 25, 6);
        ctx.restore();
    });
}

function autoRotate() {
    if (autoRotating && !wheelSpinning) rotation += 0.001;
    drawWheel();
    requestAnimationFrame(autoRotate);
}
autoRotate();

window.spinWheel = async function() {
    const wheelCost = 10;
    
    if (wheelSpinning) return;
    if (currentUser.coins < wheelCost) {
        alert('Nem√°te dostatek minc√≠! Kolo stoj√≠ 10 ü™ô');
        return;
    }
    
    wheelSpinning = true;
    autoRotating = false;
    document.getElementById('spinWheelBtn').disabled = true;
    
    currentUser.coins -= wheelCost;
    await saveUser();
    updateUI();
    
    const random = Math.random() * 100;
    let cumulative = 0;
    let selectedPrize = null;
    
    for (let prize of wheelPrizes) {
        cumulative += prize.weight;
        if (random < cumulative) {
            selectedPrize = prize;
            break;
        }
    }
    
    if (!selectedPrize) selectedPrize = wheelPrizes[0];
    
    const prizeIndex = wheelPrizes.indexOf(selectedPrize);
    const slice = 2 * Math.PI / wheelPrizes.length;
    const targetRotation = 2 * Math.PI * 8 + (3 / 2 * Math.PI - prizeIndex * slice - slice / 2);
    
    const startRotation = rotation;
    const duration = 7000;
    let startTime = null;
    
    function anim(timestamp) {
        if (!startTime) startTime = timestamp;
        let elapsed = timestamp - startTime;
        let t = Math.min(elapsed / duration, 1);
        rotation = startRotation + (targetRotation - startRotation) * easeOutCubic(t);
        drawWheel();
        if (t < 1) {
            requestAnimationFrame(anim);
        } else {
            setTimeout(() => finishWheelSpin(selectedPrize.coins), 500);
        }
    }
    requestAnimationFrame(anim);
};

function easeOutCubic(t) {
    return 1 - Math.pow(1 - t, 3);
}

async function finishWheelSpin(coinWin) {
    wheelSpinning = false;
    document.getElementById('spinWheelBtn').disabled = false;
    autoRotating = true;
    
    currentUser.coins += coinWin;
    await saveUser();
    updateUI();
    
    document.getElementById('winAmount').textContent = `+${coinWin} ü™ô`;
    document.getElementById('winModal').style.display = 'flex';
    
    if (coinWin > 0) {
        for (let i = 0; i < 80; i++) {
            setTimeout(() => createConfetti(), i * 15);
        }
    }
}

// SHOP LOGIC
function loadShop() {
    const grid = document.getElementById('shopGrid');
    grid.innerHTML = '';
    
    shopItems.forEach(item => {
        const owned = currentUser.ownedThemes.includes(item.id);
        const isActive = currentUser.activeTheme === item.id;
        
        const shopItem = document.createElement('div');
        shopItem.className = 'shop-item' + (owned ? ' owned' : '');
        
        shopItem.innerHTML = `
            <div class="shop-icon">${item.icon}</div>
            <div class="shop-name">${item.name}</div>
            <div class="shop-price">${owned ? (isActive ? 'AKTIVN√ç' : '') : item.price + ' ü™ô'}</div>
            <button class="shop-buy-btn" onclick="${owned ? `activateTheme('${item.id}')` : `buyTheme('${item.id}')`}" ${isActive ? 'disabled' : ''}>
                ${isActive ? '‚úÖ POU≈Ω√çV√ÅTE' : (owned ? 'üé® POU≈Ω√çT' : 'üí∞ KOUPIT')}
            </button>
        `;
        
        grid.appendChild(shopItem);
    });
}

window.buyTheme = async function(themeId) {
    const item = shopItems.find(i => i.id === themeId);
    
    if (!item) return;
    
    if (currentUser.ownedThemes.includes(themeId)) {
        alert('Tento vzhled ji≈æ vlastn√≠te!');
        return;
    }
    
    if (currentUser.coins < item.price) {
        alert(`Nem√°te dostatek minc√≠! Pot≈ôebujete ${item.price} ü™ô`);
        return;
    }
    
    currentUser.coins -= item.price;
    currentUser.ownedThemes.push(themeId);
    
    await saveUser();
    updateUI();
    loadShop();
    
    document.getElementById('winAmount').textContent = `Koupeno: ${item.name}!`;
    document.getElementById('winModal').style.display = 'flex';
    
    for (let i = 0; i < 50; i++) {
        setTimeout(() => createConfetti(), i * 20);
    }
};

window.activateTheme = async function(themeId) {
    const item = shopItems.find(i => i.id === themeId);
    
    if (!item) return;
    
    if (!currentUser.ownedThemes.includes(themeId)) {
        alert('Nejd≈ô√≠v mus√≠te tento vzhled koupit!');
        return;
    }
    
    currentUser.activeTheme = themeId;
    await saveUser();
    applyTheme(item.colors);
    loadShop();
    
    alert(`‚úÖ Vzhled ${item.name} byl aktivov√°n!`);
};

function applyTheme(colors) {
    document.documentElement.style.setProperty('--theme-primary', colors.primary);
    document.documentElement.style.setProperty('--theme-secondary', colors.secondary);
    
    const userName = document.getElementById('userName');
    if (userName) {
        userName.style.color = colors.primary;
        userName.style.textShadow = `0 0 15px ${colors.primary}, 0 0 30px ${colors.secondary}`;
    }
    
    const slotTitle = document.getElementById('slotTitle');
    if (slotTitle) {
        slotTitle.style.color = colors.primary;
        slotTitle.style.textShadow = `0 0 20px ${colors.primary}, 0 0 40px ${colors.secondary}`;
    }
    
    document.querySelectorAll('.reel').forEach(reel => {
        reel.style.borderColor = colors.primary;
        reel.style.boxShadow = `0 0 20px ${colors.primary}`;
    });
    
    document.querySelectorAll('.reel-window').forEach(window => {
        window.style.borderColor = colors.secondary;
        window.style.boxShadow = `0 0 15px ${colors.secondary}`;
    });
}

// GAME SWITCHING
window.switchGame = function(game) {
    currentGame = game;
    
    document.querySelectorAll('.game-container').forEach(container => {
        container.classList.remove('active');
    });
    
    document.querySelectorAll('.game-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    if (game === 'slot') {
        document.getElementById('slotGame').classList.add('active');
        document.getElementById('slotBtn').classList.add('active');
    } else if (game === 'wheel') {
        document.getElementById('wheelGame').classList.add('active');
        document.getElementById('wheelBtn').classList.add('active');
    } else if (game === 'leaderboard') {
        document.getElementById('leaderboardGame').classList.add('active');
        document.getElementById('leaderboardBtn').classList.add('active');
        loadLeaderboard();
    } else if (game === 'shop') {
        document.getElementById('shopGame').classList.add('active');
        loadShop();
    }
};

// USER MANAGEMENT
window.login = async function() {
    const nickname = document.getElementById('nicknameInput').value.trim();
    if (!nickname || nickname.length < 2) {
        alert('‚ùå Zadejte p≈ôezd√≠vku (min. 2 znaky)');
        return;
    }
    
    // Zobraz loading na tlaƒç√≠tku
    const loginBtn = document.getElementById('loginBtn');
    const originalText = loginBtn.textContent;
    loginBtn.textContent = '‚è≥ P≈ôihla≈°uji...';
    loginBtn.disabled = true;
    
    try {
        // Zkus naj√≠t existuj√≠c√≠ho u≈æivatele
        const { data: existingUser, error: searchError } = await supabase
            .from('casino_users')
            .select('*')
            .eq('nickname', nickname)
            .maybeSingle();
        
        if (existingUser) {
            // U≈æivatel existuje - p≈ôihla≈° ho
            currentUser.id = existingUser.id;
            currentUser.nickname = existingUser.nickname;
            currentUser.coins = existingUser.coins;
            currentUser.lastDailyBonus = existingUser.last_daily_bonus;
            currentUser.ownedThemes = existingUser.owned_themes || ['default'];
            currentUser.activeTheme = existingUser.active_theme || 'default';
            
            // Ulo≈æ do localStorage
            localStorage.setItem('currentUser', JSON.stringify({
                id: currentUser.id,
                username: currentUser.nickname
            }));
            
            console.log('‚úÖ U≈æivatel p≈ôihl√°≈°en:', currentUser);
        } else {
            // Nov√Ω u≈æivatel - vytvo≈ô √∫ƒçet
            currentUser.nickname = nickname;
            currentUser.coins = 100;
            currentUser.lastDailyBonus = new Date().toISOString().split('T')[0];
            currentUser.ownedThemes = ['default'];
            currentUser.activeTheme = 'default';
            
            const { data: newUser, error: insertError } = await supabase
                .from('casino_users')
                .insert([{
                    nickname: currentUser.nickname,
                    coins: currentUser.coins,
                    last_daily_bonus: currentUser.lastDailyBonus,
                    owned_themes: currentUser.ownedThemes,
                    active_theme: currentUser.activeTheme
                }])
                .select()
                .single();
            
            if (insertError) {
                throw insertError;
            }
            
            currentUser.id = newUser.id;
            
            // Ulo≈æ do localStorage
            localStorage.setItem('currentUser', JSON.stringify({
                id: currentUser.id,
                username: currentUser.nickname
            }));
            
            console.log('‚úÖ Nov√Ω u≈æivatel vytvo≈ôen:', currentUser);
        }
        
        // Aplikuj t√©ma
        const activeItem = shopItems.find(i => i.id === currentUser.activeTheme);
        if (activeItem) {
            applyTheme(activeItem.colors);
        }
        
        // Zav≈ôi modal a zobraz hru
        document.getElementById('loginModal').style.display = 'none';
        updateUI();
        checkDailyBonus();
        
    } catch (error) {
        console.error('‚ùå Chyba p≈ôi p≈ôihl√°≈°en√≠:', error);
        alert('‚ùå Nepoda≈ôilo se p≈ôihl√°sit. Zkuste to znovu.');
        loginBtn.textContent = originalText;
        loginBtn.disabled = false;
    }
};

function updateUI() {
    document.getElementById('userName').textContent = currentUser.nickname;
    document.getElementById('coinAmount').textContent = currentUser.coins;
}

window.claimDailyBonus = async function() {
    const today = new Date().toISOString().split('T')[0];
    
    if (currentUser.lastDailyBonus === today) {
        alert('Denn√≠ bonus ji≈æ byl vybr√°n! P≈ôijƒète z√≠tra! üéÅ');
        return;
    }
    
    const bonus = 100;
    currentUser.coins += bonus;
    currentUser.lastDailyBonus = today;
    
    await saveUser();
    updateUI();
    
    document.getElementById('winAmount').textContent = `+${bonus} ü™ô DENN√ç BONUS!`;
    document.getElementById('winModal').style.display = 'flex';
    
    for (let i = 0; i < 50; i++) {
        setTimeout(() => createConfetti(), i * 20);
    }
    
    checkDailyBonus();
};
    async function saveUser() {
    if (!currentUser.id) return;
    
    try {
        const { data: existingUser } = await supabase
            .from('casino_users')
            .select('id')
            .eq('id', currentUser.id)
            .maybeSingle();
        
        if (existingUser) {
            const { error } = await supabase
                .from('casino_users')
                .update({
                    nickname: currentUser.nickname,
                    coins: currentUser.coins,
                    last_daily_bonus: currentUser.lastDailyBonus,
                    owned_themes: currentUser.ownedThemes,
                    active_theme: currentUser.activeTheme
                })
                .eq('id', currentUser.id);
            
            if (error) {
                console.error('Chyba p≈ôi updatu:', error);
            }
        }
    } catch (e) {
        console.error('Chyba p≈ôi ukl√°d√°n√≠:', e);
    }
}

function checkDailyBonus() {
    const today = new Date().toISOString().split('T')[0];
    const btn = document.getElementById('dailyBonus');
    
    if (currentUser.lastDailyBonus === today) {
        btn.disabled = true;
        btn.textContent = '‚úÖ BONUS VYBR√ÅN';
    } else {
        btn.disabled = false;
        btn.textContent = 'üéÅ DENN√ç BONUS';
    }
}

// LEADERBOARD
async function loadLeaderboard() {
    const list = document.getElementById('leaderboardList');
    list.innerHTML = '<div style="text-align: center; color: #fff; font-size: 20px;">Naƒç√≠t√°m ≈æeb≈ô√≠ƒçek...</div>';
    
    const { data, error } = await supabase
        .from('casino_users')
        .select('*')
        .order('coins', { ascending: false })
        .limit(50);
    
    list.innerHTML = '';
    
    if (error || !data || data.length === 0) {
        list.innerHTML = '<div style="text-align: center; color: #fff; font-size: 20px;">≈Ω√°dn√≠ hr√°ƒçi v ≈æeb≈ô√≠ƒçku</div>';
        return;
    }
    
    data.forEach((user, index) => {
        const item = document.createElement('div');
        item.className = 'leaderboard-item';
        if (index < 3) item.classList.add('top3');
        
        let medal = '';
        if (index === 0) medal = 'ü•á';
        else if (index === 1) medal = 'ü•à';
        else if (index === 2) medal = 'ü•â';
        
        item.innerHTML = `
            <span class="leaderboard-rank">${medal} ${index + 1}.</span>
            <span class="leaderboard-name">${user.nickname}</span>
            <span class="leaderboard-coins">${user.coins} ü™ô</span>
        `;
        list.appendChild(item);
    });
}

// UTILITIES
function createConfetti() {
    const c = document.createElement("div");
    c.className = "confetti";
    c.style.left = Math.random() * window.innerWidth + "px";
    c.style.top = "-10px";
    c.style.background = `hsl(${Math.random() * 360}, 80%, 60%)`;
    c.style.width = (5 + Math.random() * 10) + "px";
    c.style.height = c.style.width;
    document.body.appendChild(c);
    
    const speedY = 3 + Math.random() * 5;
    const driftX = (Math.random() - 0.5) * 4;
    let y = -10;
    
    function fall() {
        y += speedY;
        c.style.top = y + "px";
        c.style.left = parseFloat(c.style.left) + driftX + "px";
        if (y < window.innerHeight) requestAnimationFrame(fall);
        else c.remove();
    }
    fall();
}

window.closeWinModal = function() {
    document.getElementById('winModal').style.display = 'none';
};

document.getElementById('nicknameInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') login();
});

// Inicializace
// Inicializace
window.addEventListener('load', async () => {
    console.log('üé∞ Casino inicializace...');
    
    // Spus≈• loading screen
    startLoading();
    
    initReels();
    
    // Po loading screenu (po 3-6 sekund√°ch) zkontroluj p≈ôihl√°≈°en√≠
    setTimeout(async () => {
        const savedUser = localStorage.getItem('currentUser');
        console.log('Saved user:', savedUser);
        
        if (savedUser) {
            try {
                const user = JSON.parse(savedUser);
                console.log('Parsed user:', user);
                
                currentUser.nickname = user.username;
                currentUser.id = user.id;
                
                const { data: existingUser, error } = await supabase
                    .from('casino_users')
                    .select('*')
                    .eq('id', user.id)
                    .maybeSingle();
                
                console.log('Existing user from DB:', existingUser);
                
                if (existingUser) {
                    currentUser.coins = existingUser.coins;
                    currentUser.lastDailyBonus = existingUser.last_daily_bonus;
                    currentUser.ownedThemes = existingUser.owned_themes || ['default'];
                    currentUser.activeTheme = existingUser.active_theme || 'default';
                    
                    const activeItem = shopItems.find(i => i.id === currentUser.activeTheme);
                    if (activeItem) {
                        applyTheme(activeItem.colors);
                    }
                    
                    updateUI();
                    checkDailyBonus();
                    
                    console.log('‚úÖ Automaticky p≈ôihl√°≈°en:', currentUser);
                } else {
                    // U≈æivatel neexistuje v DB - vyma≈æ local storage a zobraz login
                    localStorage.removeItem('currentUser');
                    document.getElementById('loginModal').style.display = 'flex';
                    console.log('‚ö†Ô∏è U≈æivatel nenalezen v DB, zobrazuji login');
                }
            } catch (e) {
                console.error('‚ùå Chyba p≈ôi naƒç√≠t√°n√≠ u≈æivatele:', e);
                localStorage.removeItem('currentUser');
                document.getElementById('loginModal').style.display = 'flex';
            }
        } else {
            console.log('‚ö†Ô∏è ≈Ω√°dn√Ω ulo≈æen√Ω u≈æivatel, zobrazuji login');
            document.getElementById('loginModal').style.display = 'flex';
        }
    }, 3500); // Zobraz login po skonƒçen√≠ loading screenu
});
</script>

</body>
</html>






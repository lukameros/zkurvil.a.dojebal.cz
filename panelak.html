<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Crypta Panel√°ku</title>
  <style>
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; }
    body {
      overflow: hidden;
      background: #1a1a1a;
      color: #1b1a16;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    button { font: inherit; }

    /* ---------- Background ---------- */
    .bg {
      position: fixed;
      inset: 0;
      background:
        radial-gradient(1200px 800px at 50% 35%, rgba(255,255,255,.10), transparent 55%),
        radial-gradient(900px 600px at 15% 70%, rgba(255,210,120,.07), transparent 65%),
        radial-gradient(900px 600px at 85% 70%, rgba(180,220,180,.05), transparent 65%),
        linear-gradient(180deg, #2a2a2a, #1d1d1d 55%, #141414);
      filter: saturate(.9);
      z-index: -3;
    }
    .bg::before{
      content:"";
      position:absolute;
      inset:0;
      opacity:.28;
      background-image:
        radial-gradient(circle at 20% 30%, rgba(0,0,0,.25), transparent 45%),
        radial-gradient(circle at 70% 60%, rgba(0,0,0,.30), transparent 50%),
        repeating-linear-gradient(0deg, rgba(255,255,255,.03) 0 1px, transparent 1px 6px),
        repeating-linear-gradient(90deg, rgba(255,255,255,.02) 0 1px, transparent 1px 10px);
      mix-blend-mode: overlay;
      pointer-events: none;
    }
    .bg::after{
      content:"";
      position:absolute;
      inset:0;
      background: radial-gradient(1200px 900px at 50% 45%, transparent 55%, rgba(0,0,0,.75));
      pointer-events:none;
    }

    /* ---------- App layout ---------- */
    .app {
      height: 100vh;
      display: grid;
      grid-template-columns: 260px 1fr 320px;
      gap: 16px;
      padding: 18px;
    }

    /* ---------- Paper ---------- */
    .paper {
      position: relative;
      border-radius: 18px;
      background:
        linear-gradient(180deg, rgba(255,255,255,.82), rgba(244,236,220,.82)),
        radial-gradient(circle at 18% 25%, rgba(0,0,0,.10), transparent 45%),
        radial-gradient(circle at 75% 65%, rgba(120,80,30,.12), transparent 55%),
        radial-gradient(circle at 35% 75%, rgba(0,0,0,.08), transparent 55%),
        repeating-linear-gradient(0deg, rgba(0,0,0,.028) 0 1px, transparent 1px 7px),
        repeating-linear-gradient(90deg, rgba(0,0,0,.02) 0 1px, transparent 1px 11px);
      box-shadow:
        0 28px 60px rgba(0,0,0,.55),
        inset 0 0 0 2px rgba(0,0,0,.20),
        inset 0 1px 0 rgba(255,255,255,.55);
      overflow: hidden;
    }

    .tear {
      border-radius: 18px;
      clip-path: polygon(
        0% 2%, 3% 0%, 7% 2%, 10% 0%, 13% 2%, 17% 0%, 21% 2%, 25% 0%,
        29% 2%, 33% 0%, 37% 2%, 41% 0%, 45% 2%, 49% 0%, 53% 2%, 57% 0%,
        61% 2%, 65% 0%, 69% 2%, 73% 0%, 77% 2%, 81% 0%, 85% 2%, 89% 0%,
        93% 2%, 97% 0%, 100% 2%,
        100% 98%, 97% 100%, 93% 98%, 89% 100%, 85% 98%, 81% 100%, 77% 98%, 73% 100%,
        69% 98%, 65% 100%, 61% 98%, 57% 100%, 53% 98%, 49% 100%, 45% 98%, 41% 100%,
        37% 98%, 33% 100%, 29% 98%, 25% 100%, 21% 98%, 17% 100%, 13% 98%, 10% 100%,
        7% 98%, 3% 100%, 0% 98%
      );
    }

    .tape {
      position: absolute;
      top: 10px;
      left: 22px;
      width: 120px;
      height: 26px;
      transform: rotate(-6deg);
      background: linear-gradient(180deg, rgba(230,210,150,.75), rgba(200,170,110,.55));
      border: 1px solid rgba(0,0,0,.18);
      box-shadow: 0 8px 18px rgba(0,0,0,.25);
      opacity: .9;
      pointer-events:none;
    }
    .tape::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        repeating-linear-gradient(90deg, rgba(0,0,0,.06) 0 2px, transparent 2px 8px),
        radial-gradient(circle at 30% 50%, rgba(255,255,255,.35), transparent 40%);
      mix-blend-mode: multiply;
      opacity:.5;
    }

    /* ---------- Left menu ---------- */
    .left {
      display: grid;
      grid-template-rows: 118px 1fr 54px;
      min-height: 0;
    }

    .profile { padding: 10px 10px 6px; }
    .profileTop {
      display: grid;
      grid-template-columns: 62px 1fr 42px;
      gap: 10px;
      align-items: center;
    }
    .avatar {
      width: 62px; height: 62px;
      border-radius: 12px;
      border: 2px solid rgba(0,0,0,.25);
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.35), transparent 45%),
        linear-gradient(180deg, rgba(0,0,0,.15), rgba(0,0,0,.35));
      overflow: hidden;
      box-shadow: 0 12px 22px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.35);
      position: relative;
    }
    .avatar img{ width:100%; height:100%; object-fit: cover; display:block; }
    .lvlBadge{
      position:absolute;
      bottom:-8px; left:-8px;
      width:32px; height:32px;
      border-radius:999px;
      display:grid; place-items:center;
      background: linear-gradient(180deg, rgba(70,140,70,.95), rgba(35,90,35,.95));
      color:#f0f3e6;
      font-weight: 1000;
      border:2px solid rgba(0,0,0,.25);
      box-shadow: 0 10px 16px rgba(0,0,0,.35);
      font-size: 13px;
    }

    .miniStats{ display:flex; flex-direction:column; gap:8px; }
    .miniLine{
      display:flex; align-items:center; gap:8px;
      padding:6px 8px;
      border-radius: 12px;
      background: rgba(0,0,0,.06);
      border: 1px solid rgba(0,0,0,.18);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.35);
      font-weight: 900;
    }
    .miniIcon{
      width:22px;height:22px;
      display:grid; place-items:center;
      border-radius: 8px;
      background: rgba(0,0,0,.12);
      border:1px solid rgba(0,0,0,.15);
      font-size: 14px;
    }
    .miniVal{ margin-left:auto; font-weight: 1100; letter-spacing:.2px; }

    .plusBtn{
      width: 42px; height: 42px;
      border-radius: 12px;
      border: 2px solid rgba(0,0,0,.25);
      background: linear-gradient(180deg, rgba(120,30,30,.95), rgba(70,15,15,.95));
      color: rgba(255,255,255,.90);
      font-weight: 1100;
      cursor: pointer;
      box-shadow: 0 12px 18px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.15);
    }
    .plusBtn:hover{ filter: brightness(1.05); }
    .plusBtn:active{ transform: translateY(1px); }

    .menuList{
      padding: 8px 10px 10px;
      min-height:0;
      overflow: auto;
    }
    .menuList::-webkit-scrollbar{ width: 10px; }
    .menuList::-webkit-scrollbar-thumb{
      background: rgba(0,0,0,.18);
      border-radius: 999px;
      border: 2px solid rgba(255,255,255,.30);
    }

    .navBtn{
      width:100%;
      padding: 12px 12px;
      margin: 8px 0;
      border-radius: 14px;
      border: 2px solid rgba(0,0,0,.22);
      background: linear-gradient(180deg, rgba(120,30,30,.92), rgba(65,15,15,.92));
      color: rgba(255,255,255,.88);
      font-weight: 1000;
      letter-spacing: .6px;
      text-transform: uppercase;
      text-align: left;
      cursor: pointer;
      box-shadow:
        0 16px 26px rgba(0,0,0,.32),
        inset 0 1px 0 rgba(255,255,255,.12),
        inset 0 -10px 20px rgba(0,0,0,.25);
      position: relative;
      overflow: hidden;
    }
    .navBtn::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(circle at 20% 30%, rgba(255,255,255,.12), transparent 45%),
        repeating-linear-gradient(0deg, rgba(0,0,0,.06) 0 1px, transparent 1px 6px);
      opacity:.35;
      pointer-events:none;
      mix-blend-mode: overlay;
    }
    .navBtn:hover{ filter: brightness(1.05); }
    .navBtn:active{ transform: translateY(1px); }
    .navBtn.active{
      outline: 3px solid rgba(0,0,0,.12);
      border-color: rgba(255,230,170,.30);
      background: linear-gradient(180deg, rgba(160,60,55,.92), rgba(80,25,20,.92));
      box-shadow: 0 18px 28px rgba(0,0,0,.38), 0 0 0 2px rgba(255,220,140,.12) inset;
    }

    .leftBottom{
      padding: 10px;
      display:flex;
      align-items:center;
      justify-content: flex-start;
      gap:10px;
    }
    .gearBtn{
      width:44px;height:44px;
      border-radius: 14px;
      border: 2px solid rgba(0,0,0,.22);
      background: rgba(0,0,0,.06);
      cursor:pointer;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.35), 0 10px 18px rgba(0,0,0,.25);
      font-size: 18px;
    }
    .gearBtn:hover{ filter: brightness(1.05); }

    /* ---------- Center ---------- */
    .center {
      position: relative;
      min-height: 0;
      display: grid;
      /* m√≠sto p≈Øvodn√≠ho headeru: boss bar + mapa + footer */
      grid-template-rows: 112px 1fr 54px;
      gap: 12px;
    }

    /* ======= NOV√â: Boss avatar bar (10 kus≈Ø + ≈°ipky) ======= */
    .bossBarWrap{
      padding: 10px 12px 8px;
      display:flex;
      align-items:center;
      gap: 10px;
      /* √∫plnƒõ bez ‚Äúheader boxu‚Äù ‚Äì jen pap√≠r + st√≠n a pozad√≠ */
      background: rgba(0,0,0,.03);
      border-bottom: 2px solid rgba(0,0,0,.10);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.45);
      position: relative;
      overflow: hidden;
    }

    .bossBarWrap::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(circle at 20% 40%, rgba(255,255,255,.30), transparent 55%),
        repeating-linear-gradient(0deg, rgba(0,0,0,.05) 0 1px, transparent 1px 7px);
      opacity:.25;
      pointer-events:none;
      mix-blend-mode: overlay;
    }

    .bossStrip{
      flex:1;
      display:flex;
      gap: 10px;
      overflow:auto;
      padding: 4px 2px 10px;
      scroll-behavior: smooth;
      position: relative;
      z-index: 1;
    }
    .bossStrip::-webkit-scrollbar{ height: 10px; }
    .bossStrip::-webkit-scrollbar-thumb{
      background: rgba(0,0,0,.18);
      border-radius: 999px;
      border: 2px solid rgba(255,255,255,.35);
    }

    /* velk√Ω ‚Äúavatar‚Äù boss */
    .bossAvatar{
      width: 82px;
      min-width: 82px;
      height: 82px;
      border-radius: 18px;
      border: 3px solid rgba(0,0,0,.20);
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.65), rgba(0,0,0,.06));
      box-shadow:
        0 18px 26px rgba(0,0,0,.22),
        inset 0 1px 0 rgba(255,255,255,.65),
        inset 0 -14px 22px rgba(0,0,0,.12);
      cursor:pointer;
      user-select:none;
      position: relative;
      display:grid;
      place-items:center;
      overflow:hidden;
    }

    /* ‚Äúroztrhan√Ω n√°lepky‚Äù feeling na avataru */
    .bossAvatar::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(circle at 25% 30%, rgba(255,255,255,.35), transparent 55%),
        radial-gradient(circle at 75% 70%, rgba(0,0,0,.10), transparent 55%),
        repeating-linear-gradient(0deg, rgba(0,0,0,.05) 0 1px, transparent 1px 6px);
      opacity:.35;
      pointer-events:none;
      mix-blend-mode: overlay;
    }

    .bossAvatar .ico{
      font-size: 32px;
      filter: drop-shadow(0 2px 0 rgba(0,0,0,.35));
      position: relative;
      z-index: 1;
    }

    .bossAvatar .lvl{
      position:absolute;
      left: 6px;
      bottom: 6px;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(255,255,255,.78);
      border: 2px solid rgba(0,0,0,.16);
      font-weight: 1100;
      font-size: 11px;
      letter-spacing:.2px;
      box-shadow: 0 10px 14px rgba(0,0,0,.14);
      z-index: 2;
    }

    .bossAvatar.locked{
      opacity:.45;
      filter: grayscale(.75);
    }
    .bossAvatar.locked::after{
      content:"üîí";
      position:absolute;
      right: -6px;
      top: -6px;
      width: 26px;
      height: 26px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      background: rgba(255,255,255,.80);
      border: 2px solid rgba(0,0,0,.18);
      box-shadow: 0 10px 14px rgba(0,0,0,.14);
      font-size: 13px;
      z-index: 3;
    }

    .bossAvatar.available{
      border-color: rgba(160,110,35,.55);
      box-shadow:
        0 18px 26px rgba(0,0,0,.22),
        0 0 0 4px rgba(255,210,120,.16),
        inset 0 1px 0 rgba(255,255,255,.65),
        inset 0 -14px 22px rgba(0,0,0,.12);
    }
    .bossAvatar.cleared{
      border-color: rgba(60,120,60,.55);
      box-shadow:
        0 18px 26px rgba(0,0,0,.22),
        0 0 0 4px rgba(120,220,150,.12),
        inset 0 1px 0 rgba(255,255,255,.65),
        inset 0 -14px 22px rgba(0,0,0,.12);
    }
    .bossAvatar.selected{
      outline: 4px solid rgba(0,0,0,.10);
      outline-offset: 6px;
      transform: translateY(-1px);
    }

    /* ≈†ipky napravo vedle posledn√≠ho avatara */
    .bossArrows{
      display:flex;
      gap: 8px;
      align-items:center;
      position: relative;
      z-index: 2;
    }
    .arrowBtn{
      width: 44px;
      height: 44px;
      border-radius: 14px;
      border: 2px solid rgba(0,0,0,.20);
      background: rgba(255,255,255,.65);
      box-shadow: 0 12px 18px rgba(0,0,0,.16), inset 0 1px 0 rgba(255,255,255,.65);
      cursor:pointer;
      font-size: 18px;
      font-weight: 1100;
    }
    .arrowBtn:hover{ filter: brightness(1.03); }
    .arrowBtn:active{ transform: translateY(1px); }

    /* ---------- Map ---------- */
    .mapWrap{
      position: relative;
      min-height: 0;
      padding: 12px;
    }
    .map {
      height: 100%;
      min-height: 0;
      position: relative;
      border-radius: 18px;
      border: 2px solid rgba(0,0,0,.22);
      background:
        radial-gradient(circle at 30% 35%, rgba(0,0,0,.12), transparent 55%),
        radial-gradient(circle at 75% 60%, rgba(120,80,30,.12), transparent 58%),
        linear-gradient(180deg,\db rgba(250,244,232,.85), rgba(238,228,208,.85));
      box-shadow: 0 26px 60px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.55);
      overflow: hidden;
    }
    .map::before{
      content:"";
      position:absolute;
      inset:0;
      opacity:.85;
      background:
        repeating-linear-gradient(0deg, rgba(0,0,0,.07) 0 2px, transparent 2px 38px),
        repeating-linear-gradient(90deg, rgba(0,0,0,.05) 0 2px, transparent 2px 55px),
        radial-gradient(circle at 22% 30%, rgba(120,80,30,.10), transparent 45%),
        radial-gradient(circle at 72% 55%, rgba(120,80,30,.08), transparent 55%);
      mix-blend-mode: multiply;
      filter: blur(.2px);
      pointer-events:none;
    }
    .map::after{
      content:"";
      position:absolute;
      inset:0;
      background: radial-gradient(1200px 800px at 50% 45%, transparent 55%, rgba(0,0,0,.55));
      pointer-events:none;
    }

    .district{
      position:absolute;
      padding: 7px 10px;
      border-radius: 14px;
      border: 2px solid rgba(0,0,0,.20);
      background: rgba(0,0,0,.06);
      font-weight: 1100;
      letter-spacing:.6px;
      text-transform: uppercase;
      font-size: 12px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.35), 0 12px 20px rgba(0,0,0,.18);
      user-select:none;
    }

    svg.paths{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      pointer-events:none;
      opacity:.95;
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.25));
    }

    .node{
      position:absolute;
      transform: translate(-50%,-50%);
      width: 52px;
      height: 52px;
      border-radius: 999px;
      border: 3px solid rgba(0,0,0,.22);
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.55), rgba(0,0,0,.12));
      box-shadow:
        0 16px 26px rgba(0,0,0,.35),
        inset 0 1px 0 rgba(255,255,255,.55),
        inset 0 -10px 18px rgba(0,0,0,.16);
      display:grid;
      place-items:center;
      cursor:pointer;
      user-select:none;
      opacity: .92;
    }
    .node .icon{ font-size: 22px; filter: drop-shadow(0 2px 0 rgba(0,0,0,.35)); }
    .node .lvl{
      position:absolute;
      bottom:-10px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 2px solid rgba(0,0,0,.20);
      background: rgba(255,255,255,.70);
      box-shadow: 0 10px 16px rgba(0,0,0,.18);
      font-size: 11px;
      font-weight: 1100;
      letter-spacing:.2px;
    }
    .node.locked{ opacity:.45; filter: grayscale(.7); }
    .node.locked::after{
      content:"üîí";
      position:absolute;
      right:-6px;
      top:-6px;
      width: 24px;
      height: 24px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      border: 2px solid rgba(0,0,0,.22);
      background: rgba(255,255,255,.72);
      box-shadow: 0 10px 16px rgba(0,0,0,.18);
      font-size: 12px;
    }
    .node.available{ border-color: rgba(160,110,35,.55); }
    .node.cleared{ border-color: rgba(60,120,60,.55); }
    .node.selected{
      outline: 4px solid rgba(0,0,0,.10);
      outline-offset: 6px;
    }

    /* ---------- Center footer ---------- */
    .centerFooter{
      padding: 10px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .hint{
      font-weight: 900;
      opacity:.8;
      font-size: 12px;
      letter-spacing:.2px;
    }
    .actionRow{
      display:flex;
      gap:10px;
    }
    .btn{
      padding: 10px 12px;
      border-radius: 14px;
      border: 2px solid rgba(0,0,0,.22);
      background: linear-gradient(180deg, rgba(255,255,255,.72), rgba(240,230,210,.72));
      box-shadow: 0 12px 20px rgba(0,0,0,.18), inset 0 1px 0 rgba(255,255,255,.65);
      cursor:pointer;
      font-weight: 1100;
      letter-spacing:.3px;
    }
    .btn:hover{ filter: brightness(1.03); }
    .btn:active{ transform: translateY(1px); }
    .btn.primary{
      background: linear-gradient(180deg, rgba(220,190,120,.85), rgba(190,150,85,.75));
    }
    .btn:disabled{
      opacity: .55;
      cursor: not-allowed;
      transform:none !important;
      filter:none !important;
    }

    /* ---------- Right panel ---------- */
    .right{ display:grid; grid-template-rows: 1fr; min-height:0; }
    .rightInner{
      padding: 14px 14px 12px;
      min-height:0;
      overflow:auto;
    }
    .rightInner::-webkit-scrollbar{ width: 10px; }
    .rightInner::-webkit-scrollbar-thumb{
      background: rgba(0,0,0,.18);
      border-radius: 999px;
      border: 2px solid rgba(255,255,255,.30);
    }

    .sectionTitle{
      font-weight: 1200;
      letter-spacing: 1px;
      text-transform: uppercase;
      font-size: 18px;
      margin: 0 0 10px;
      text-shadow: 0 1px 0 rgba(255,255,255,.6);
    }
    .statBlock{ display:grid; gap:6px; font-weight: 1000; margin-bottom: 14px; }
    .statRow{
      display:flex;
      justify-content:space-between;
      gap:10px;
      padding: 6px 8px;
      border-radius: 12px;
      border: 2px solid rgba(0,0,0,.18);
      background: rgba(0,0,0,.05);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.45);
    }

    .box{
      border-radius: 18px;
      border: 2px solid rgba(0,0,0,.22);
      background: rgba(0,0,0,.04);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.35);
      padding: 10px;
      margin: 10px 0 14px;
      position: relative;
      overflow:hidden;
    }
    .box::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(circle at 20% 30%, rgba(255,255,255,.25), transparent 45%),
        repeating-linear-gradient(0deg, rgba(0,0,0,.06) 0 1px, transparent 1px 6px);
      opacity:.25;
      pointer-events:none;
      mix-blend-mode: overlay;
    }

    .shopItem{
      display:grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items:center;
      padding: 10px;
      border-radius: 16px;
      border: 2px solid rgba(0,0,0,.18);
      background: rgba(255,255,255,.55);
      box-shadow: 0 12px 18px rgba(0,0,0,.14), inset 0 1px 0 rgba(255,255,255,.55);
      margin: 10px 0;
      position:relative;
      overflow:hidden;
    }
    .shopItem h3{ margin:0; font-size: 14px; letter-spacing:.6px; text-transform: uppercase; font-weight: 1200; }
    .shopItem p{ margin: 4px 0 0; font-size: 12px; font-weight: 900; opacity: .8; letter-spacing:.2px; }

    .buyBtn{
      padding: 10px 12px;
      border-radius: 14px;
      border: 2px solid rgba(0,0,0,.22);
      background: linear-gradient(180deg, rgba(220,190,120,.85), rgba(190,150,85,.75));
      box-shadow: 0 12px 18px rgba(0,0,0,.18), inset 0 1px 0 rgba(255,255,255,.55);
      cursor:pointer;
      font-weight: 1100;
      white-space:nowrap;
    }
    .buyBtn:disabled{ opacity:.55; cursor:not-allowed; transform:none !important; filter:none !important; }

    .tinyNote{
      font-size: 12px;
      font-weight: 900;
      opacity:.72;
      padding: 8px 10px;
      border-radius: 14px;
      border: 2px dashed rgba(0,0,0,.18);
      background: rgba(255,255,255,.45);
      margin-top: 10px;
    }

    @media (max-width: 1100px){
      body{ overflow:auto; }
      .app{ height:auto; grid-template-columns: 1fr; padding: 12px; }
      .bossArrows{ display:none; } /* na mobilu jen scroll prstem */
    }
  </style>
</head>

<body>
  <div class="bg"></div>

  <div class="app">

    <!-- LEFT MENU -->
    <aside class="paper tear left">
      <div class="tape"></div>

      <div class="profile">
        <div class="profileTop">
          <div class="avatar" title="Avatar (nahraj avatar.jpg vedle souboru)">
            <img src="avatar.jpg" alt="" onerror="this.style.display='none'">
            <div class="lvlBadge" id="lvlBadge">3</div>
          </div>

          <div class="miniStats">
            <div class="miniLine" title="Gro≈°e">
              <div class="miniIcon">ü™ô</div>
              <div style="font-weight:1100;letter-spacing:.2px;">Gro≈°e</div>
              <div class="miniVal" id="miniGrose">0</div>
            </div>
            <div class="miniLine" title="Zlat√© (cig√°ra)">
              <div class="miniIcon">üö¨</div>
              <div style="font-weight:1100;letter-spacing:.2px;">Zlat√©</div>
              <div class="miniVal" id="miniCigs">0</div>
            </div>
          </div>

          <button class="plusBtn" id="btnPlus" title="Rychl√° akce">+</button>
        </div>
      </div>

      <nav class="menuList" aria-label="Menu">
        <button class="navBtn" data-go="tavern.html">TAVERN</button>
        <button class="navBtn" data-go="arena.html">ARENA</button>
        <button class="navBtn" data-go="weapon.html">WEAPON SHOP</button>
        <button class="navBtn" data-go="magic.html">MAGIC SHOP</button>
        <button class="navBtn" data-go="stable.html">STABLE</button>
        <button class="navBtn" data-go="dungeons.html">DUNGEONS</button>
        <button class="navBtn" data-go="fortress.html">FORTRESS</button>
        <button class="navBtn" data-go="guild.html">GUILD</button>
        <button class="navBtn" data-go="hof.html">HALL OF FAME</button>
        <button class="navBtn active" data-go="panelak.html">CRYPTA PANEL√ÅKU</button>
      </nav>

      <div class="leftBottom">
        <button class="gearBtn" id="btnSettings" title="Nastaven√≠ / reset">‚öôÔ∏è</button>
      </div>
    </aside>

    <!-- CENTER -->
    <main class="paper tear center">
      <div class="tape" style="left:auto; right:22px; transform: rotate(7deg); width:140px;"></div>

      <!-- ‚úÖ Naho≈ôe: 10 avatar≈Ø boss≈Ø + ≈°ipky -->
      <div class="bossBarWrap">
        <div class="bossStrip" id="bossStrip" aria-label="Bossov√© (v√Ωbƒõr)"></div>
        <div class="bossArrows" aria-label="Posouv√°n√≠ boss≈Ø">
          <button class="arrowBtn" id="bossLeft" title="Doleva">‚óÄ</button>
          <button class="arrowBtn" id="bossRight" title="Doprava">‚ñ∂</button>
        </div>
      </div>

      <section class="mapWrap">
        <div class="map" id="map">
          <div class="district" style="left:7%; top:12%;">Kotelna</div>
          <div class="district" style="left:62%; top:14%;">Sklepn√≠ blok</div>
          <div class="district" style="left:18%; top:68%;">V√Ωtahy</div>
          <div class="district" style="left:58%; top:72%;">Laviƒçn√° z√≥na</div>

          <svg class="paths" viewBox="0 0 1000 600" preserveAspectRatio="none" aria-hidden="true">
            <defs>
              <linearGradient id="pgrad" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="rgba(0,0,0,.28)"/>
                <stop offset="1" stop-color="rgba(160,110,35,.45)"/>
              </linearGradient>
            </defs>
            <path id="pathMain" d="" fill="none" stroke="url(#pgrad)" stroke-width="6" stroke-linecap="round" stroke-dasharray="12 10"/>
            <path id="pathAlt" d="" fill="none" stroke="rgba(0,0,0,.18)" stroke-width="4" stroke-linecap="round" stroke-dasharray="10 12"/>
          </svg>

          <div id="nodesHost"></div>
        </div>
      </section>

      <footer class="centerFooter">
        <div class="hint" id="centerHint">Tip: ‚ÄúVyrazit‚Äù je zat√≠m placeholder (a≈æ to napoj√≠≈° na hlavn√≠ hru).</div>
        <div class="actionRow">
          <button class="btn" id="btnBack">‚Üê zpƒõt</button>
          <button class="btn primary" id="btnGo" disabled>Vyrazit</button>
          <button class="btn" id="btnClear" disabled>Oznaƒçit hotovo</button>
        </div>
      </footer>
    </main>

    <!-- RIGHT -->
    <aside class="paper tear right">
      <div class="tape" style="width:110px; left:18px; transform: rotate(-10deg);"></div>

      <div class="rightInner">
        <div class="sectionTitle">GRO≈†E</div>

        <div class="statBlock">
          <div class="statRow"><span>Gro≈°e:</span> <b id="gross">0</b></div>
          <div class="statRow"><span>Za klik:</span> <b id="perClick">1</b></div>
          <div class="statRow"><span>Za sekundu:</span> <b id="perSec">0.0</b></div>
        </div>

        <div class="sectionTitle" style="margin-top:6px;">OBCHOD</div>

        <div class="box">
          <div class="shopItem">
            <div>
              <h3>Kurzor</h3>
              <p>+0.1 / s ‚Ä¢ ‚Äúkomputer za≈°uk√° za tebe‚Äù</p>
            </div>
            <button class="buyBtn" id="buyCursor">Koupit (<span id="priceCursor">15</span>)</button>
          </div>

          <div class="shopItem">
            <div>
              <h3>Babiƒçka</h3>
              <p>+1 / s ‚Ä¢ ‚Äúpeƒçe, ale i krade‚Äù</p>
            </div>
            <button class="buyBtn" id="buyGranny">Koupit (<span id="priceGranny">100</span>)</button>
          </div>

          <div class="shopItem">
            <div>
              <h3>S√≠la kliku</h3>
              <p>+1 za klik ‚Ä¢ ‚Äú≈°lehne≈° v√≠c‚Äù</p>
            </div>
            <button class="buyBtn" id="buyClick">Vylep≈°it (<span id="priceClick">50</span>)</button>
          </div>

          <div class="shopItem">
            <div>
              <h3>Zlat√© cig√°ra</h3>
              <p>+1% bonus (pasivnƒõ) ‚Ä¢ ‚Äúsmrd√≠ bohatstv√≠m‚Äù</p>
            </div>
            <button class="buyBtn" id="buyCigs">Koupit (<span id="priceCigs">250</span>)</button>
          </div>
        </div>

        <div class="sectionTitle">PRESTIGE</div>
        <div class="box">
          <div class="statRow"><span>Slav Points:</span> <b id="slavPoints">0</b></div>
          <div class="statRow"><span>Bonus celkem:</span> <b id="bonusPct">+0%</b></div>
          <div class="statRow"><span>Z√≠sk√°≈° p≈ôi presti≈æi:</span> <b id="gainPrestige">0</b></div>

          <div style="display:flex; gap:10px; margin-top:10px;">
            <button class="btn primary" id="btnPrestige" style="flex:1;">Prestige (reset)</button>
            <button class="btn danger" id="btnHardReset" style="flex:1;">Hard reset</button>
          </div>

          <div class="tinyNote">
            Brat, v≈°echno je v <b>localStorage</b>. Prestige resetne gro≈°e & upgrady, ale d√° trval√Ω bonus.
          </div>
        </div>

        <div class="sectionTitle">INFO BOSS</div>
        <div class="box">
          <div style="display:flex; align-items:center; gap:10px;">
            <div id="bossIcon" style="font-size:26px;">‚ùì</div>
            <div style="min-width:0;">
              <div id="bossName" style="font-weight:1200; letter-spacing:.5px; text-transform:uppercase; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">
                Vyber bosse naho≈ôe
              </div>
              <div id="bossState" style="font-weight:900; opacity:.75; margin-top:2px;">Stav: ‚Äî</div>
            </div>
          </div>
          <div id="bossDesc" style="margin-top:10px; font-weight:900; opacity:.8; line-height:1.35;">
            Klikni na avatar bosse naho≈ôe (nebo na uzel v mapƒõ).
          </div>
          <div id="bossTags" style="display:flex; flex-wrap:wrap; gap:6px; margin-top:10px;"></div>
        </div>
      </div>
    </aside>

  </div>

  <script>
    const SAVE_KEY = "crypta_panelaku_save_v4";

    // 6 re√°ln√Ωch boss≈Ø + 4 placeholdery (budouc√≠)
    const BOSSES = [
      { id:"start", name:"Vchod do sklepa", icon:"üö™", level:1,  tags:["start","sklep"], desc:"Zaƒç√≠n√° to tady. Pl√≠se≈à, rez, a nƒõkdo ti d√Ωch√° za krk.", x:170, y:430 },
      { id:"krysa", name:"Krysa≈ô z kotelny", icon:"üêÄ", level:3,  tags:["kotelna","≈°p√≠na"], desc:"Trubky huƒç√≠. Krysa≈ô m√° mop a p√°ru.", x:260, y:175 },
      { id:"domovnik", name:"Domovn√≠k SSSR", icon:"üßπ", level:6,  tags:["kontrola","re≈æim"], desc:"Kontroluje p≈ôez≈Øvky, noƒçn√≠ klid a v√Ωtahov√Ω ≈ô√°d.", x:470, y:260 },
      { id:"vytah", name:"Kr√°l v√Ωtah≈Ø", icon:"üõó", level:9,  tags:["v√Ωtah","stun"], desc:"Zasekl√Ω mezi patry. Vypne svƒõtlo a d√° stun.", x:650, y:410 },
      { id:"golem", name:"Betonov√Ω Golem", icon:"üß±", level:12, tags:["beton","tank"], desc:"Kdy≈æ dupne, prask√° om√≠tka i mor√°l.", x:780, y:250 },
      { id:"stin",  name:"St√≠n ve sklepƒõ",  icon:"üïØÔ∏è", level:15, tags:["temno","fin√°le"], desc:"Nevid√≠≈° ho. Jen c√≠t√≠≈°. A v√≠≈°, ≈æe jsi do≈°el moc daleko.", x:880, y:120 },

      // placeholders / budouc√≠ bossov√© (zat√≠m locked a bez uzl≈Ø v mapƒõ)
      { id:"p7", name:"?? (brzy)", icon:"‚ùì", level:18, tags:["coming"], desc:"Tady budou dal≈°√≠ bossov√© (a≈æ potom).", x:null, y:null },
      { id:"p8", name:"?? (brzy)", icon:"‚ùì", level:21, tags:["coming"], desc:"Tady budou dal≈°√≠ bossov√© (a≈æ potom).", x:null, y:null },
      { id:"p9", name:"?? (brzy)", icon:"‚ùì", level:24, tags:["coming"], desc:"Tady budou dal≈°√≠ bossov√© (a≈æ potom).", x:null, y:null },
      { id:"p10", name:"?? (brzy)", icon:"‚ùì", level:27, tags:["coming"], desc:"Tady budou dal≈°√≠ bossov√© (a≈æ potom).", x:null, y:null },
    ];

    function loadSave(){
      try{ return JSON.parse(localStorage.getItem(SAVE_KEY) || "null"); }
      catch{ return null; }
    }

    function defaultSave(){
      const bossStatus = {};
      BOSSES.forEach((b, i) => bossStatus[b.id] = (i === 0 ? "available" : "locked"));
      return {
        grose: 0,
        perClick: 1,
        perSec: 0.0,
        cursorCount: 0,
        grannyCount: 0,
        clickUpCount: 0,
        cigs: 0,
        slavPoints: 0,
        bossStatus,
        selectedBoss: "start",
        lvl: 3,
        lastTs: Date.now()
      };
    }

    let S = loadSave() || defaultSave();
    function saveNow(){ localStorage.setItem(SAVE_KEY, JSON.stringify(S)); }
    function getBoss(id){ return BOSSES.find(b => b.id === id); }

    // DOM
    const nodesHost = document.getElementById("nodesHost");
    const pathMain = document.getElementById("pathMain");
    const pathAlt  = document.getElementById("pathAlt");

    const bossStrip = document.getElementById("bossStrip");
    const bossLeft  = document.getElementById("bossLeft");
    const bossRight = document.getElementById("bossRight");

    const btnGo    = document.getElementById("btnGo");
    const btnClear = document.getElementById("btnClear");
    const btnBack  = document.getElementById("btnBack");

    const gross    = document.getElementById("gross");
    const perClick = document.getElementById("perClick");
    const perSec   = document.getElementById("perSec");

    const miniGrose = document.getElementById("miniGrose");
    const miniCigs  = document.getElementById("miniCigs");
    const lvlBadge  = document.getElementById("lvlBadge");

    const bossIcon  = document.getElementById("bossIcon");
    const bossName  = document.getElementById("bossName");
    const bossState = document.getElementById("bossState");
    const bossDesc  = document.getElementById("bossDesc");
    const bossTags  = document.getElementById("bossTags");

    const priceCursor = document.getElementById("priceCursor");
    const priceGranny = document.getElementById("priceGranny");
    const priceClick  = document.getElementById("priceClick");
    const priceCigs   = document.getElementById("priceCigs");

    const buyCursor = document.getElementById("buyCursor");
    const buyGranny = document.getElementById("buyGranny");
    const buyClick  = document.getElementById("buyClick");
    const buyCigs   = document.getElementById("buyCigs");

    const slavPoints = document.getElementById("slavPoints");
    const bonusPct   = document.getElementById("bonusPct");
    const gainPrestige = document.getElementById("gainPrestige");
    const btnPrestige  = document.getElementById("btnPrestige");
    const btnHardReset = document.getElementById("btnHardReset");

    const btnPlus     = document.getElementById("btnPlus");
    const btnSettings = document.getElementById("btnSettings");

    // Economy
    function prestigeBonusMultiplier(){ return 1 + (S.slavPoints * 0.02); }
    function computePerSec(){
      const base = (S.cursorCount * 0.1) + (S.grannyCount * 1.0);
      S.perSec = +(base * prestigeBonusMultiplier()).toFixed(1);
    }
    function computePrices(){
      const pc = Math.floor(15  * Math.pow(1.16, S.cursorCount));
      const pg = Math.floor(100 * Math.pow(1.18, S.grannyCount));
      const pk = Math.floor(50  * Math.pow(1.22, S.clickUpCount));
      const ps = Math.floor(250 * Math.pow(1.25, S.cigs));
      return { pc, pg, pk, ps };
    }
    function addGrose(a){ S.grose = Math.max(0, (S.grose || 0) + a); }

    // Boss progress
    function unlockNextAfter(id){
      const idx = BOSSES.findIndex(b => b.id === id);
      const next = BOSSES[idx + 1];
      if(!next) return;
      if(S.bossStatus[next.id] === "locked") S.bossStatus[next.id] = "available";
    }
    function setSelectedBoss(id){
      S.selectedBoss = id;
      saveNow();
      render();
    }

    // Tick
    function tick(){
      const now = Date.now();
      const dt = Math.max(0, (now - (S.lastTs || now)) / 1000);
      S.lastTs = now;

      computePerSec();
      if(S.perSec > 0 && dt > 0) addGrose(S.perSec * dt);

      saveNow();
      renderTopStatsOnly();
      requestAnimationFrame(tick);
    }

    // Render paths (jen pro prvn√≠ch 6 boss≈Ø co maj√≠ x/y)
    function updatePaths(){
      const real = BOSSES.filter(b => b.x !== null && b.y !== null);
      const pts = real.map(b => [b.x, b.y]);
      const d = pts.map((p,i)=> (i===0 ? `M ${p[0]} ${p[1]}` : `L ${p[0]} ${p[1]}`)).join(" ");
      pathMain.setAttribute("d", d);

      const pts2 = pts.slice(0, 3);
      const d2 = pts2.map((p,i)=> (i===0 ? `M ${p[0]} ${p[1]}` : `L ${p[0]} ${p[1]}`)).join(" ");
      pathAlt.setAttribute("d", d2);
    }

    // Render map nodes (jen re√°ln√≠)
    function renderNodes(){
      nodesHost.innerHTML = "";
      for(const b of BOSSES){
        if(b.x === null || b.y === null) continue;
        const st = S.bossStatus[b.id] || "locked";
        const el = document.createElement("div");
        el.className = `node ${st} ${S.selectedBoss === b.id ? "selected" : ""}`;
        el.style.left = b.x + "px";
        el.style.top  = b.y + "px";
        el.dataset.id = b.id;
        el.title = `${b.name} (lvl ${b.level})`;
        el.innerHTML = `<div class="icon">${b.icon}</div><div class="lvl">lvl ${b.level}</div>`;
        el.addEventListener("click", () => setSelectedBoss(b.id));
        nodesHost.appendChild(el);
      }
    }

    // ‚úÖ Render boss avatar strip (10 kus≈Ø)
    function renderBossStrip(){
      bossStrip.innerHTML = "";
      for(const b of BOSSES){
        const st = S.bossStatus[b.id] || "locked";

        const a = document.createElement("div");
        a.className = `bossAvatar ${st} ${S.selectedBoss === b.id ? "selected" : ""}`;
        a.title = `${b.name} (lvl ${b.level})`;
        a.dataset.id = b.id;

        a.innerHTML = `
          <div class="ico">${b.icon}</div>
          <div class="lvl">lvl ${b.level}</div>
        `;

        a.addEventListener("click", () => setSelectedBoss(b.id));
        bossStrip.appendChild(a);
      }

      // auto-scroll tak aby vybran√Ω boss byl vidƒõt
      const sel = bossStrip.querySelector(`.bossAvatar[data-id="${S.selectedBoss}"]`);
      if(sel){
        const r = sel.getBoundingClientRect();
        const c = bossStrip.getBoundingClientRect();
        if(r.left < c.left || r.right > c.right){
          sel.scrollIntoView({ behavior:"smooth", inline:"center", block:"nearest" });
        }
      }
    }

    function renderBossInfo(){
      const b = getBoss(S.selectedBoss) || BOSSES[0];
      const st = S.bossStatus[b.id] || "locked";

      bossIcon.textContent = b.icon;
      bossName.textContent = `${b.name} (lvl ${b.level})`;
      bossState.textContent = `Stav: ${st}`;
      bossDesc.textContent = b.desc;

      bossTags.innerHTML = "";
      for(const t of b.tags){
        const tag = document.createElement("div");
        tag.style.padding = "6px 9px";
        tag.style.borderRadius = "999px";
        tag.style.border = "2px solid rgba(0,0,0,.18)";
        tag.style.background = "rgba(0,0,0,.05)";
        tag.style.fontWeight = "1100";
        tag.style.fontSize = "12px";
        tag.style.letterSpacing = ".2px";
        tag.textContent = t;
        bossTags.appendChild(tag);
      }

      btnGo.disabled    = (st !== "available");
      btnClear.disabled = (st === "locked");
    }

    function renderTopStatsOnly(){
      gross.textContent = Math.floor(S.grose);
      perClick.textContent = S.perClick;
      perSec.textContent = (S.perSec || 0).toFixed(1);

      miniGrose.textContent = Math.floor(S.grose);
      miniCigs.textContent  = S.cigs;

      lvlBadge.textContent  = S.lvl ?? 3;

      slavPoints.textContent = S.slavPoints;
      bonusPct.textContent = `+${Math.round((prestigeBonusMultiplier()-1)*100)}%`;
      gainPrestige.textContent = Math.floor((S.grose || 0) / 2500);
    }

    function renderShop(){
      computePerSec();
      const { pc, pg, pk, ps } = computePrices();

      priceCursor.textContent = pc;
      priceGranny.textContent = pg;
      priceClick.textContent  = pk;
      priceCigs.textContent   = ps;

      buyCursor.disabled = (S.grose < pc);
      buyGranny.disabled = (S.grose < pg);
      buyClick.disabled  = (S.grose < pk);
      buyCigs.disabled   = (S.grose < ps);
    }

    function render(){
      updatePaths();
      renderNodes();
      renderBossStrip();
      renderBossInfo();
      renderTopStatsOnly();
      renderShop();
    }

    // Events
    document.querySelectorAll(".navBtn").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const href = btn.getAttribute("data-go");
        if(!href) return;
        if(href === "panelak.html") return;
        window.location.href = href;
      });
    });

    btnBack.addEventListener("click", ()=> window.location.href = "index.html");

    btnPlus.addEventListener("click", ()=>{
      addGrose(25 * prestigeBonusMultiplier());
      saveNow();
      render();
    });

    btnSettings.addEventListener("click", ()=>{
      const ok = confirm("Resetnout jen mapu (boss progres)?");
      if(!ok) return;
      const bossStatus = {};
      BOSSES.forEach((b,i)=> bossStatus[b.id] = (i===0 ? "available" : "locked"));
      S.bossStatus = bossStatus;
      S.selectedBoss = "start";
      saveNow();
      render();
    });

    btnGo.addEventListener("click", ()=>{
      const b = getBoss(S.selectedBoss);
      if(!b) return;
      if((S.bossStatus[b.id] || "locked") !== "available") return;
      alert(`Vyrazil jsi na: ${b.name}\n\n(sem pak napoj√≠me boss fight / loot / animaci)`);
      addGrose(-5);
      saveNow();
      render();
    });

    btnClear.addEventListener("click", ()=>{
      const b = getBoss(S.selectedBoss);
      if(!b) return;
      if((S.bossStatus[b.id] || "locked") === "locked") return;

      S.bossStatus[b.id] = "cleared";
      unlockNextAfter(b.id);

      addGrose(250 + b.level * 40);
      S.lvl = Math.min(99, (S.lvl || 3) + 1);

      saveNow();
      render();
    });

    // shop
    buyCursor.addEventListener("click", ()=>{
      const { pc } = computePrices();
      if(S.grose < pc) return;
      addGrose(-pc);
      S.cursorCount++;
      computePerSec();
      saveNow();
      render();
    });

    buyGranny.addEventListener("click", ()=>{
      const { pg } = computePrices();
      if(S.grose < pg) return;
      addGrose(-pg);
      S.grannyCount++;
      computePerSec();
      saveNow();
      render();
    });

    buyClick.addEventListener("click", ()=>{
      const { pk } = computePrices();
      if(S.grose < pk) return;
      addGrose(-pk);
      S.clickUpCount++;
      S.perClick++;
      saveNow();
      render();
    });

    buyCigs.addEventListener("click", ()=>{
      const { ps } = computePrices();
      if(S.grose < ps) return;
      addGrose(-ps);
      S.cigs++;
      saveNow();
      render();
    });

    // prestige
    btnPrestige.addEventListener("click", ()=>{
      const gain = Math.floor((S.grose || 0) / 2500);
      if(gain <= 0){ alert("Na presti≈æ je m√°lo gro≈°≈Ø. Zkus aspo≈à 2500."); return; }
      const ok = confirm(`Prestige resetne gro≈°e & upgrady.\nZ√≠sk√°≈° Slav Points: +${gain}\nPokraƒçovat?`);
      if(!ok) return;

      S.slavPoints += gain;

      S.grose = 0;
      S.perClick = 1;
      S.cursorCount = 0;
      S.grannyCount = 0;
      S.clickUpCount = 0;
      S.cigs = 0;

      computePerSec();
      saveNow();
      render();
    });

    btnHardReset.addEventListener("click", ()=>{
      const ok = confirm("Hard reset = sma≈æe √∫plnƒõ v≈°echno. Jsi si jist√Ω?");
      if(!ok) return;
      localStorage.removeItem(SAVE_KEY);
      S = defaultSave();
      saveNow();
      render();
    });

    // klik na mapu (pr√°zdno) => gro≈°e za klik
    document.getElementById("map").addEventListener("click", (e)=>{
      if(e.target.closest(".node")) return;
      addGrose(S.perClick * prestigeBonusMultiplier());
      saveNow();
      renderTopStatsOnly();
    });

    // ‚úÖ ≈†ipky (posun stripu) ‚Äî ‚Äúdal≈°√≠ str√°nky‚Äù udƒõl√°me pozdƒõji
    function scrollBossStrip(dir){
      const amount = 320; // kolik px posun
      bossStrip.scrollBy({ left: dir * amount, behavior: "smooth" });
    }
    bossLeft.addEventListener("click", () => scrollBossStrip(-1));
    bossRight.addEventListener("click", () => scrollBossStrip(1));

    // init
    if(!S.bossStatus) S = defaultSave();
    if(!S.selectedBoss) S.selectedBoss = "start";
    if(!S.bossStatus["start"]) S.bossStatus["start"] = "available";

    computePerSec();
    saveNow();
    render();
    requestAnimationFrame(tick);
  </script>
</body>
</html>
